/**
 * AngularUI - The companion suite for AngularJS
 * @version v0.4.0 - 2013-06-23
 * @link http://angular-ui.github.com
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */angular.module("ui.config",[]).value("ui.config",{}),angular.module("ui.filters",["ui.config"]),angular.module("ui.directives",["ui.config"]),angular.module("ui",["ui.filters","ui.directives","ui.config"]),angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(uiConfig,$timeout){var options={};return angular.isString(uiConfig.animate)?options["class"]=uiConfig.animate:uiConfig.animate&&(options=uiConfig.animate),{restrict:"A",link:function($scope,element,attrs){var opts={};attrs.uiAnimate&&(opts=$scope.$eval(attrs.uiAnimate),angular.isString(opts)&&(opts={"class":opts})),opts=angular.extend({"class":"ui-animate"},options,opts),element.addClass(opts["class"]),$timeout(function(){element.removeClass(opts["class"])},20,!1)}}}]),angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(uiConfig){return uiConfig.uiCalendar=uiConfig.uiCalendar||{},{require:"ngModel",restrict:"A",link:function(scope,elm,attrs){function update(){scope.calendar=elm.html("");var view=scope.calendar.fullCalendar("getView");view&&(view=view.name);var expression,options={defaultView:view,eventSources:sources};expression=attrs.uiCalendar?scope.$eval(attrs.uiCalendar):{},angular.extend(options,uiConfig.uiCalendar,expression),scope.calendar.fullCalendar(options)}var sources=scope.$eval(attrs.ngModel),tracker=0,getSources=function(){var equalsTracker=scope.$eval(attrs.equalsTracker);return tracker=0,angular.forEach(sources,function(value){angular.isArray(value)&&(tracker+=value.length)}),angular.isNumber(equalsTracker)?tracker+sources.length+equalsTracker:tracker+sources.length};update(),scope.$watch(getSources,function(){update()})}}}]),angular.module("ui.directives").directive("uiCodemirror",["ui.config","$timeout",function(uiConfig,$timeout){"use strict";var events=["cursorActivity","viewportChange","gutterClick","focus","blur","scroll","update"];return{restrict:"A",require:"ngModel",link:function(scope,elm,attrs,ngModel){var options,opts,onChange,deferCodeMirror,codeMirror;if("textarea"!==elm[0].type)throw Error("uiCodemirror3 can only be applied to a textarea element");options=uiConfig.codemirror||{},opts=angular.extend({},options,scope.$eval(attrs.uiCodemirror)),onChange=function(aEvent){return function(instance,changeObj){var newValue=instance.getValue();newValue!==ngModel.$viewValue&&(ngModel.$setViewValue(newValue),scope.$apply()),"function"==typeof aEvent&&aEvent(instance,changeObj)}},deferCodeMirror=function(){codeMirror=CodeMirror.fromTextArea(elm[0],opts),codeMirror.on("change",onChange(opts.onChange));for(var aEvent,i=0,n=events.length;n>i;++i)aEvent=opts["on"+events[i].charAt(0).toUpperCase()+events[i].slice(1)],void 0!==aEvent&&"function"==typeof aEvent&&codeMirror.on(events[i],aEvent);ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||null===value)return"";if(angular.isObject(value)||angular.isArray(value))throw Error("ui-codemirror cannot use an object or an array as a model");return value}),ngModel.$render=function(){codeMirror.setValue(ngModel.$viewValue)},attrs.uiRefresh&&scope.$watch(attrs.uiRefresh,function(newVal,oldVal){newVal!==oldVal&&$timeout(codeMirror.refresh)})},$timeout(deferCodeMirror)}}}]),angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(uiConfig,currencyFilter){var options={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};return uiConfig.currency&&angular.extend(options,uiConfig.currency),{restrict:"EAC",require:"ngModel",link:function(scope,element,attrs,controller){var opts,renderview,value;opts=angular.extend({},options,scope.$eval(attrs.uiCurrency)),renderview=function(viewvalue){var num;return num=1*viewvalue,element.toggleClass(opts.pos,num>0),element.toggleClass(opts.neg,0>num),element.toggleClass(opts.zero,0===num),""===viewvalue?element.text(""):element.text(currencyFilter(num,opts.symbol)),!0},controller.$render=function(){value=controller.$viewValue,element.val(value),renderview(value)}}}}]),angular.module("ui.directives").directive("uiDate",["ui.config",function(uiConfig){"use strict";var options;return options={},angular.isObject(uiConfig.date)&&angular.extend(options,uiConfig.date),{require:"?ngModel",link:function(scope,element,attrs,controller){var getOptions=function(){return angular.extend({},uiConfig.date,scope.$eval(attrs.uiDate))},initDateWidget=function(){var opts=getOptions();if(controller){var updateModel=function(){scope.$apply(function(){var date=element.datepicker("getDate");element.datepicker("setDate",element.val()),controller.$setViewValue(date),element.blur()})};if(opts.onSelect){var userHandler=opts.onSelect;opts.onSelect=function(value,picker){updateModel(),scope.$apply(function(){userHandler(value,picker)})}}else opts.onSelect=updateModel;element.bind("change",updateModel),controller.$render=function(){var date=controller.$viewValue;if(angular.isDefined(date)&&null!==date&&!angular.isDate(date))throw Error("ng-Model value must be a Date object - currently it is a "+typeof date+" - use ui-date-format to convert it from a string");element.datepicker("setDate",date)}}element.datepicker("destroy"),element.datepicker(opts),controller&&controller.$render()};scope.$watch(getOptions,initDateWidget,!0)}}}]).directive("uiDateFormat",["ui.config",function(uiConfig){var directive={require:"ngModel",link:function(scope,element,attrs,modelCtrl){var dateFormat=attrs.uiDateFormat||uiConfig.dateFormat;dateFormat?(modelCtrl.$formatters.push(function(value){return angular.isString(value)?$.datepicker.parseDate(dateFormat,value):void 0}),modelCtrl.$parsers.push(function(value){return value?$.datepicker.formatDate(dateFormat,value):void 0})):(modelCtrl.$formatters.push(function(value){return angular.isString(value)?new Date(value):void 0}),modelCtrl.$parsers.push(function(value){return value?value.toISOString():void 0}))}};return directive}]),angular.module("ui.directives").directive("uiDatetimepicker",[function(){function convertTimezone(dateMoment,tzFromMinutes,tzToMinutes,params){var ret={date:!1,dateFormatted:!1};(void 0===tzFromMinutes||!tzFromMinutes&&0!==tzFromMinutes)&&(tzFromMinutes=dateMoment.zone()),(void 0===tzToMinutes||!tzToMinutes&&0!==tzToMinutes)&&(tzToMinutes=moment().zone());var tzDiffMinutes=tzToMinutes-tzFromMinutes;dateMoment=tzDiffMinutes>-1?dateMoment.subtract("minutes",tzDiffMinutes):dateMoment.add("minutes",tzDiffMinutes);var dateFormatted=dateMoment.format("YYYY-MM-DD HH:mm:ss"),hrOffset=""+Math.floor(tzToMinutes/60);1==hrOffset.length&&(hrOffset="0"+hrOffset);var minutesOffset=""+tzToMinutes%60;1==minutesOffset.length&&(minutesOffset="0"+minutesOffset);var plusMinus="+";tzToMinutes>=0&&(plusMinus="-");var tzOffsetString=plusMinus+hrOffset+":"+minutesOffset;return dateFormatted+=""+tzOffsetString,ret.date=moment(dateFormatted,"YYYY-MM-DD HH:mm:ssZ"),void 0!==params.format&&(ret.dateFormatted=ret.date.format(params.format)),ret}return{restrict:"A",scope:{ngModel:"=",validate:"&",onchange:"&",opts:"="},compile:function(element,attrs){var type="pikaday";"undefined"!=typeof forge&&forge&&void 0!==forge&&(type="forge"),attrs.placeholder||(attrs.placeholder="Choose a date/time");var html="<div>";return"pikaday"==type?html+="<input class='ui-datetimepicker-input' type='datetime' placeholder='"+attrs.placeholder+"' />":"forge"==type&&(html+="<input class='ui-datetimepicker-input' type='datetime' placeholder='"+attrs.placeholder+"' />"),html+="</div>",element.replaceWith(html),function(scope,element,attrs){function onSelectDate(date){triggerSkipSelect||(updateModel(date,{}),void 0!==scope.validate&&void 0!==scope.validate()&&"function"==typeof scope.validate()?scope.validate()(date,{},function(valid){valid?handleValidOnchange(date,{}):(date="",document.getElementById(attrs.id).value="",updateModel(date,{}))}):handleValidOnchange(date,{}),scope.$$phase||scope.$apply())}function updateModel(date){scope.ngModel=date,scope.$$phase||scope.$apply()}function handleValidOnchange(date){void 0!==scope.onchange&&void 0!==scope.onchange()&&"function"==typeof scope.onchange()&&scope.onchange()(date,{})}void 0===attrs.id&&(attrs.id="uiDatetimepicker"+Math.random().toString(36).substring(7)),element.find("input").attr("id",attrs.id);var triggerSkipSelect=!0;if("forge"==type){if(forge.ui.enhanceInput("#"+attrs.id),scope.ngModel){var dateObj=moment(scope.ngModel,"YYYY-MM-DD HH:mm:ssZ"),inputFormat=dateObj.format("YYYY-MM-DDTHH:mm:ssZ");document.getElementById(attrs.id).value=inputFormat}element.find("input").bind("blur",function(){var dateMoment,date=document.getElementById(attrs.id).value,tzFromMinutes=!1;"object"==typeof date?dateMoment=moment(date):"string"==typeof date&&(dateMoment=moment(date,"YYYY-MM-DD HH:mm"),date.indexOf("Z")>-1&&(tzFromMinutes=0));var dtInfo=convertTimezone(dateMoment,tzFromMinutes,!1,{format:"YYYY-MM-DD HH:mm:ssZ"}),inputFormat=dtInfo.date.format("YYYY-MM-DDTHH:mm:ssZ");document.getElementById(attrs.id).value=inputFormat,onSelectDate(dtInfo.dateFormatted)})}else{var defaultPikadayOpts={field:document.getElementById(attrs.id),onSelect:function(){var date=this.getMoment().format("YYYY-MM-DD HH:mm:ssZ");onSelectDate(date)},minDate:new Date("2000-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2e3,2020]};void 0===scope.opts.pikaday&&(scope.opts.pikaday={});var pikadayOpts=angular.extend(defaultPikadayOpts,scope.opts.pikaday),picker=new Pikaday(pikadayOpts);if(scope.ngModel){var dateOnly=scope.ngModel.slice(0,scope.ngModel.indexOf(" ")),timeOnly=scope.ngModel.slice(scope.ngModel.indexOf(" ")+1,scope.ngModel.length);picker.setMoment(moment(dateOnly,"YYYY-MM-DD")),picker.setTimeMoment(moment(timeOnly,"HH:mm:ss"))}}triggerSkipSelect=!1}},controller:function(){}}}]),angular.module("ui.directives").directive("uiEvent",["$parse",function($parse){return function(scope,elm,attrs){var events=scope.$eval(attrs.uiEvent);angular.forEach(events,function(uiEvent,eventName){var fn=$parse(uiEvent);elm.bind(eventName,function(evt){var params=Array.prototype.slice.call(arguments);params=params.splice(1),scope.$apply(function(){fn(scope,{$event:evt,$params:params})})})})}}]),angular.module("ui.directives").directive("uiForminput",["ui.config","$compile","$http","$timeout",function(uiConfig,$compile,$http,$timeout){return{restrict:"A",transclude:!0,priority:100,scope:{ngModel:"=",opts:"=",selectOpts:"=",optsDatetime:"=?",validateDatetime:"&?",onchangeDatetime:"&?"},require:"?^form",compile:function(element,attrs){attrs.type||(attrs.type="text");var defaults={noLabel:0};for(var xx in defaults)void 0===attrs[xx]&&(attrs[xx]=defaults[xx]);for(var attrsToInt=["noLabel"],ii=0;attrsToInt.length>ii;ii++)attrs[attrsToInt[ii]]=parseInt(attrs[attrsToInt[ii]],10);attrs.class||"";var placeholder=attrs.placeholder||attrs.label||"",label=attrs.label||attrs.placeholder||"",html={label:"",input:"",validation:""};label&&!attrs.noLabel&&(html.label="<label>"+label+"</label>");var customAttrs="",skipAttrs=["uiForminput","ngModel","label","type","placeholder","opts","name","optsDatetime","validateDatetime","onchangeDatetime"];angular.forEach(attrs,function(value,key){"$"!==key.charAt(0)&&-1===skipAttrs.indexOf(key)&&(customAttrs+=attrs.$attr[key],attrs[key]&&(customAttrs+="="+attrs[key]),customAttrs+=" ")});var uniqueName="uiFormInput"+attrs.type+Math.random().toString(36).substring(7),elementTag="input";"text"==attrs.type?html.input="<input class='ui-forminput-input' name='"+uniqueName+"' ng-model='ngModel' type='text' placeholder='"+placeholder+"' "+customAttrs+" />":"password"==attrs.type?html.input="<input class='ui-forminput-input' name='"+uniqueName+"' ng-model='ngModel' type='password' placeholder='"+placeholder+"' "+customAttrs+" />":"textarea"==attrs.type?(elementTag="textarea",html.input="<textarea class='ui-forminput-input' name='"+uniqueName+"' ng-model='ngModel' placeholder='"+placeholder+"' "+customAttrs+" ></textarea>"):"select"==attrs.type?(elementTag="select",html.input="<select class='ui-forminput-input' name='"+uniqueName+"' ng-model='ngModel' ng-change='onchange({})' "+customAttrs+" ng-options='opt.val as opt.name for opt in selectOpts'></select>"):"multi-select"==attrs.type?(elementTag="div",html.input="<div class='ui-forminput-input' name='"+uniqueName+"' ui-multiselect select-opts='selectOpts' ng-model='ngModel' config='opts'></div>"):("date"==attrs.type||"datetime"==attrs.type)&&(elementTag="div",html.input="<div class='ui-forminput-input' name='"+uniqueName+"' ui-datetimepicker opts='optsDatetime' ng-model='ngModel'  placeholder='"+placeholder+"' ",attrs.validateDatetime&&(html.input+="validate='validateDatetime' "),attrs.onchangeDatetime&&(html.input+="onchange='onchangeDatetime' "),html.input+=">",html.input+="</div>"),html.validation="<div class='ui-forminput-validation text-error' ng-repeat='(key, error) in field.$error track by $id($index)' ng-show='error && field.$dirty' class='help-inline'>{{opts1.validationMessages[key]}}</div>";var htmlFull="<div class='ui-forminput-cont'><div class='ui-forminput'>"+html.label+html.input+"</div>"+html.validation+"</div>";return element.replaceWith(htmlFull),function(scope,element,attrs,formCtrl){void 0===attrs.id&&(attrs.id="uiFormInput"+attrs.type+Math.random().toString(36).substring(7)),attrs.name||(attrs.name=attrs.id),scope.id=attrs.id,scope.name=attrs.name,element.find(elementTag+".ui-forminput-input").attr("name",attrs.name),("multi-select"==attrs.type||"date"==attrs.type||"datetime"==attrs.type)&&$compile($(element))(scope),formCtrl&&(formCtrl[attrs.name]=formCtrl[uniqueName],delete formCtrl[uniqueName],scope.field=formCtrl[attrs.name])}},controller:function($scope,$element,$attrs){function init(){("select"==$attrs.type||"multiSelect"==$attrs.type)&&initSelect({})}function initSelect(){initSelectModel({}),initSelectOpts({})}function initSelectModel(){void 0!==$scope.ngModel&&"string"!=typeof $scope.ngModel&&($scope.ngModel=""+$scope.ngModel)}function initSelectOpts(){var ii;for(ii=0;$scope.selectOpts.length>ii;ii++)"number"==typeof $scope.selectOpts[ii].val&&($scope.selectOpts[ii].val=""+$scope.selectOpts[ii].val)}$scope.opts1={};var defaultOpts={validationMessages:{required:"Required!",minlength:"Too short!",maxlength:"Too long!",pattern:"Invalid characters!"}};if($scope.opts&&void 0!==$scope.opts){var xx;for(xx in defaultOpts)$scope.opts1[xx]=defaultOpts[xx]}else $scope.opts1=defaultOpts;$scope.opts&&$scope.opts.ngChange&&($scope.onchange=function(){$timeout(function(){$scope.opts.ngChange()},50)}),("date"==$attrs.type||"datetime"==$attrs.type)&&(void 0!==$scope.optsDatetime&&$scope.optsDatetime||($scope.optsDatetime={pikaday:{}}),"datetime"==$attrs.type&&($scope.optsDatetime.pikaday.showTime=!0)),$scope.$watch("ngModel",function(newVal,oldVal){angular.equals(oldVal,newVal)||("select"==$attrs.type||"multiSelect"==$attrs.type)&&initSelectModel({})}),init({})}}}]),angular.module("ui.directives").directive("uiIconbutton",["ui.config",function(){return{restrict:"A",link:function(scope,element,attrs){element.addClass("ui-iconbutton clearfix");var htmlText="<div class='ui-iconbutton-icon "+attrs.iconClass+"'></div>"+"<div class='ui-iconbutton-text'>"+attrs.buttonText+"</div>";element.html(htmlText)}}}]),angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(element,attr,transclude){return function(scope,element,attr){var childElement,childScope;scope.$watch(attr.uiIf,function(newValue){childElement&&(childElement.remove(),childElement=void 0),childScope&&(childScope.$destroy(),childScope=void 0),newValue&&(childScope=scope.$new(),transclude(childScope,function(clone){childElement=clone,element.after(clone)}))})}}}}]),angular.module("ui.directives").directive("uiImageupload",["ui.config","$timeout","uiImageuploadData",function(uiConfig,$timeout,uiImageuploadData){return{restrict:"A",scope:{opts:"=",ngModel:"="},compile:function(element,attrs){var xx,defaults={type:"dragNDrop",useUploadButton:"0",classes:{dragText:"ui-imageupload-drag-text",orText:"ui-imageupload-or-text",uploadText:"ui-imageupload-upload-text",browseInput:"ui-imageupload-browse-input",browseButton:"ui-imageupload-browse-button",uploadButton:"ui-imageupload-upload-button"},htmlUploading:"",showProgress:!0};void 0!==attrs.htmlUploading&&(defaults.showProgress=!1);for(xx in defaults)void 0===attrs[xx]&&(attrs[xx]="object"==typeof defaults[xx]?{}:defaults[xx]);for(xx in defaults.classes)void 0===attrs.classes[xx]&&(attrs.classes[xx]=defaults.classes[xx]);for(var attrsToInt=["useUploadButton"],ii=0;attrsToInt.length>ii;ii++)attrs[attrsToInt[ii]]=parseInt(attrs[attrsToInt[ii]],10);void 0===attrs.id&&(attrs.id="uiImageupload"+Math.random().toString(36).substring(7));var fileTypeDisplay="Image",id1=attrs.id,ids={input:{fileFake:id1+"FileFake",file:id1+"File",byUrl:id1+"ByUrl"},progress:{barInner:id1+"ProgressBarInner",bar:id1+"ProgressBar"}};attrs.ids=ids,uiImageuploadData[id1]={ids:ids};var htmlDisplay,htmlUrlInstructions;void 0!==attrs.htmlDisplay?(htmlDisplay=attrs.htmlDisplay,htmlDisplay+="<input ng-model='fileFake' id='"+ids.input.fileFake+"' type='hidden' disabled=disabled name='fakeupload' />"):(htmlDisplay="<span class='"+attrs.classes.dragText+"'>Drag "+fileTypeDisplay+" Here</span><br />",htmlDisplay+="<span class='"+attrs.classes.orText+"'>--OR--</span><br />",htmlDisplay+="<span class='"+attrs.classes.uploadText+"'>Upload File:</span><br />",htmlDisplay+="<input ng-model='fileFake' id='"+ids.input.fileFake+"' type='text' disabled=disabled name='fakeupload' class='"+attrs.classes.browseInput+"' /><span class='"+attrs.classes.browseButton+"'>Browse</span>"),htmlUrlInstructions=void 0!==attrs.htmlUrlInstructions?attrs.htmlUrlInstructions:"<span class='ui-imageupload-by-url-instructions'>1. Right click an image on the web, 2. Choose \"Copy image URL\", 3. Paste it above!</span>",attrs.cropOptions={cropAspectRatio:1};var widthAspectDummyPercent=Math.floor(100/attrs.cropOptions.cropAspectRatio);widthAspectDummyPercent=0;var ngShow={dragNDrop:!1,uploadButton:!1};"dragNDrop"==attrs.type&&(ngShow.dragNDrop=!0,attrs.useUploadButton||(ngShow.uploadButton=!1));var html="";html+="<div class='ui-imageupload-form-container'>",html+="<form class='ui-imageupload-form' enctype='multipart/form-data' method='post' action='{{uploadPath}}'>",html+="<div class='ui-imageupload-fake-input-container' ng-show='"+ngShow.dragNDrop+"'>",html+="<div class='ui-imageupload-fake-input-container-inner'>",html+="<div class='ui-imageupload-aspect-ratio-dummy' style='padding-top:"+widthAspectDummyPercent+"%;'></div>",html+="<div class='ui-imageupload-aspect-ratio-element'>",html+=htmlDisplay,html+="</div>",html+="</div>",html+="<div class='ui-imageupload-picture-container' ng-show='{{show.pictureContainer}}'>",html+="<div class='ui-imageupload-aspect-ratio-dummy' style='padding-top:"+widthAspectDummyPercent+"%;'></div>",html+="<div class='ui-imageupload-aspect-ratio-element'>",html+="<div class='ui-imageupload-picture-container-img-outer'>",html+="<img class='ui-imageupload-picture-container-img' ng-src='{{imgSrc}}' />",html+="</div>",html+="</div>",html+="</div>",html+="<input ng-model='file' type='file' name='"+ids.input.file+"' id='"+ids.input.file+"' class='ui-imageupload-input' onchange='angular.element(this).scope().fileSelected({})' />",html+="<div class='ui-imageupload-picture-container-below' ng-show='{{show.pictureContainerBelow}}'>",html+="<div class='ui-imageupload-picture-crop-div'><span class='ui-imageupload-picture-crop-button'>Crop Thumbnail</span></div>",html+="<div class='ui-imageupload-picture-container-text'>Click or drag onto the picture to change images</div>",html+="</div>",html+="<div class='ui-imageupload-picture-crop-container'>",html+="</div>",html+="</div>",html+="<div class='ui-imageupload-by-url-container' ng-hide='"+ngShow.dragNDrop+"'>",html+="<span class='ui-imageupload-by-url-text'>Upload From Other Website</span><br /><br />",html+="<input ng-model='fileByUrl' id='"+attrs.ids.input.byUrl+"' type='text' class='ui-imageupload-by-url-input' placeholder='Copy & Paste URL here' />",html+=htmlUrlInstructions,html+="</div>",html+="</form>",html+="<div class='ui-imageupload-upload-upload-button-container' ng-show='"+ngShow.uploadButton+"'><span class='"+attrs.classes.uploadButton+"' ng-click='uploadFile({})'>Upload</span></div>",html+="<div class='ui-imageupload-notify' ng-show='{{show.notify}}'>"+attrs.htmlUploading+"</div>",html+="<div id='"+attrs.ids.progress.bar+"' class='ui-imageupload-progress-bar'><div id='"+attrs.ids.progress.barInner+"' class='ui-imageupload-progress-bar-inner'>&nbsp;</div></div>",html+="<div>{{progressNumber}}</div>",html+="<div>{{fileInfo.name}}</div>",html+="<div>{{fileInfo.size}}</div>",html+="<div>{{fileInfo.type}}</div>",html+="</div>",element.replaceWith(html)},controller:function($scope,$element,$attrs){function checkFileType(fileName,params){var returnArray={valid:!0,errorMsg:""},fileExtension=getFileExtension(fileName,params);if(params.fileTypes&&("string"==typeof params.fileTypes&&(params.fileTypes="image"==params.fileTypes?["png","jpg","jpeg","bmp","gif"]:"any"),"any"!=params.fileTypes)){returnArray.valid=!1,returnArray.errorMsg="Allowed file types are: ";for(var ii=0;params.fileTypes.length>ii;ii++)returnArray.errorMsg+=params.fileTypes[ii].toLowerCase(),params.fileTypes.length-1>ii&&(returnArray.errorMsg+=", "),params.fileTypes[ii].toLowerCase()==fileExtension&&(returnArray.valid=!0)}return returnArray}function getFileExtension(fileName){var ext=fileName.slice(fileName.lastIndexOf(".")+1,fileName.length).toLowerCase();return ext}function uploadProgress(evt){if(evt.lengthComputable){var percentComplete=Math.round(100*evt.loaded/evt.total);$scope.progressNumber=""+percentComplete+"%",document.getElementById($attrs.ids.progress.barInner).style.width=""+percentComplete+"%"}else $scope.progressNumber="unable to compute"}function uploadComplete(evt,params){document.getElementById($attrs.ids.progress.barInner).style.width="100%";var ele1=angular.element(document.getElementById($attrs.ids.progress.bar));ele1.addClass("complete"),$scope.progressNumber="";var data=$.parseJSON(evt.target.responseText);afterComplete(params,data)}function afterComplete(params,data){var imgInfo={};if(imgInfo.imgSrc=void 0!==data[$scope.opts.imageServerKeys.imgFilePath]?data[$scope.opts]:$scope.opts.uploadDirectory+data[$scope.opts.imageServerKeys.imgFileName],imgInfo.picHeight=data[$scope.opts.imageServerKeys.picHeight],imgInfo.picWidth=data[$scope.opts.imageServerKeys.picWidth],imgInfo.imgSrcCrop=imgInfo.imgSrc,imgInfo.picHeightCrop=imgInfo.picHeight,imgInfo.picWidthCrop=imgInfo.picWidth,$scope.opts.cropOptions.crop){var index1=imgInfo.imgSrc.lastIndexOf(".");imgInfo.imgSrcCrop=imgInfo.imgSrc.slice(0,index1)+$scope.opts.cropOptions.cropDuplicateSuffix+imgInfo.imgSrc.slice(index1,imgInfo.imgSrc.length),imgInfo.picWidthCrop=$scope.opts.cropOptions.cropMaxWidth,imgInfo.picHeightCrop=$scope.opts.cropOptions.cropMaxHeight}var img=new Image;if(img.onload=function(){$scope.imgSrc=img.src,params.imgInfo=imgInfo,imgInfo.picHeightCrop=img.height,imgInfo.picWidthCrop=img.width},img.src=imgInfo.imgSrcCrop,$scope.ngModel=data.imgFileName,$scope.opts.callbackInfo&&(void 0===$scope.opts.callbackInfo||!params.noCallback)){var args=$scope.opts.callbackInfo.args;args=args.concat(data),$scope.$emit($scope.opts.callbackInfo.evtName,args)}$scope.show.notify=!1,$scope.$$phase||$scope.$apply()}function uploadFailed(){alert("There was an error attempting to upload the file. Please try again or try a different file.")}function uploadCanceled(){alert("The upload has been canceled by the user or the browser dropped the connection.")}var defaults={cropOptions:uiImageuploadData.cropOptionsDefault,serverParamNames:{file:"file",byUrl:"fileData[fileUrl]"},values:{}};void 0===$scope.opts&&($scope.opts={});for(var xx in defaults)void 0===$scope.opts[xx]&&($scope.opts[xx]=defaults[xx]);$scope.file="",$scope.fileByUrl="",$scope.imgSrc=$scope.opts.values.dirPath+$scope.opts.values.src,$scope.show={notify:!1,pictureContainer:!1,pictureContainerBelow:!1},$scope.fileSelected=function(params){var file,retArray;if("byUrl"==$attrs.type)file=document.getElementById($attrs.ids.input.byUrl).value,retArray=checkFileType(file,{fileTypes:$scope.opts.fileTypes}),retArray.valid||(document.getElementById($attrs.ids.input.byUrl).value="",alert(retArray.errorMsg));else{if(file=document.getElementById($attrs.ids.input.file).files[0]){var fileSize=0;fileSize=file.size>1048576?""+Math.round(100*file.size/1048576)/100+"MB":""+Math.round(100*file.size/1024)/100+"KB"}file&&(retArray=checkFileType(file.name,{fileTypes:$scope.opts.fileTypes}),retArray.valid?document.getElementById($attrs.ids.input.fileFake).value=document.getElementById($attrs.ids.input.file).value:(document.getElementById($attrs.ids.input.file).value="",alert(retArray.errorMsg)))}$attrs.useUploadButton||"dragNDrop"!=$attrs.type||$scope.uploadFile(params)},$scope.uploadFile=function(params){var fileVal;if($attrs.htmlUploading&&($scope.show.notify=!0),fileVal=void 0!==$attrs.fileUrl?$attrs.fileUrl:"byUrl"==$attrs.type?document.getElementById($attrs.ids.input.byUrl).value:document.getElementById($attrs.ids.input.file).value,fileVal.length>0){if(angular.element(document.getElementById($attrs.ids.progress.barInner)).css({width:"0%"}),$attrs.showProgress){var eleProgressBar=angular.element(document.getElementById($attrs.ids.progress.bar));eleProgressBar.removeClass("complete"),eleProgressBar.addClass("loading")}var fd=new FormData;if("byUrl"==$attrs.type?fd.append($scope.opts.serverParamNames.byUrl,fileVal):fd.append($scope.opts.serverParamNames.file,document.getElementById($attrs.ids.input.file).files[0]),fd.append("fileData[uploadDir]",$scope.opts.uploadDirectory),void 0!==$scope.opts.cropOptions)for(var xx in $scope.opts.cropOptions)fd.append("cropOptions["+xx+"]",$scope.opts.cropOptions[xx]);var sendInfo=fd,xhr=new XMLHttpRequest;$attrs.showProgress&&xhr.upload.addEventListener("progress",uploadProgress,!1),xhr.onload=function(ee){uploadComplete(ee,params)},xhr.onerror=function(ee){uploadFailed(ee,params)},xhr.addEventListener("abort",uploadCanceled,!1),xhr.open("POST",$scope.opts.uploadPath),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.onreadystatechange=function(){4==xhr.readyState&&200!=xhr.status&&uploadFailed("",params)},xhr.send(sendInfo)}}}}}]).factory("uiImageuploadData",["ui.config","$timeout",function(){var inst={cropOptionsDefault:{crop:!0,cropAspectRatio:1,cropMinHeight:100,cropMinWidth:100,cropMaxHeight:300,cropMaxWidth:300,cropDuplicateSuffix:"_crop"},cropCoords:{x1:0,x2:0,y1:0,y2:0},cropCurrentImageSrc:"",cropInfoEdit:{JcropApi:!1,cropping:!1},curData:{}};return inst}]),angular.module("ui.directives").directive("uiInfinitescroll",["ui.config","$timeout","uiInfinitescrollData",function(uiConfig,$timeout,uiInfinitescrollData){return{restrict:"A",transclude:!0,scope:{items:"=",itemsView:"=",opts:"=",loadMore:"&"},compile:function(element,attrs){var defaults={pageSize:10,scrollLoad:"0",loadMorePageSize:20,pageScroll:0,scrollBuffer:75,scrollBufferPercent:33,noStopLoadMore:0,negativeLoad:0,animateLoad:0,animateScrollDuration:1e3,itemHeight:0,animateAfterItems:0,animateAfterDuration:1e3,noMoreResultsText:"No More Results!"};for(var xx in defaults)void 0===attrs[xx]&&(attrs[xx]=defaults[xx]);for(var attrsToInt=["pageSize","loadMorePageSize","scrollLoad","scrollBuffer","pageScroll","noStopLoadMore","negativeLoad","animateLoad","animateScrollDuration","itemHeight","animateAfterItems","animateAfterDuration"],ii=0;attrsToInt.length>ii;ii++)attrs[attrsToInt[ii]]=parseInt(attrs[attrsToInt[ii]],10);attrs.loadMorePageSize<attrs.pageSize&&(attrs.loadMorePageSize=attrs.pageSize),void 0===attrs.id&&(attrs.id="uiInfinitescroll"+Math.random().toString(36).substring(7));var id1=attrs.id;attrs.ids={input:id1+"Input",contentBottom:id1+"ContentBottom",inputBelow:id1+"InputBelow",scrollContent:id1+"ScrollContent"};var html="<div class='ui-infinitescroll'><div class='ui-infinitescroll-top'><div ng-hide='(noMoreLoadMoreItems.prev) || (opts.cursors.itemsView.start <=0 && !negativeLoad) || (scrollLoad && hasScrollbar)' class='ui-infinitescroll-more' ng-click='loadMoreDir({\"prev\":true})'>Load More</div></div><div id='"+attrs.ids.scrollContent+"' class='ui-infinitescroll-content' ng-transclude></div>"+"<div id='"+attrs.ids.contentBottom+"'>"+"<div ng-hide='(noMoreLoadMoreItems.next && opts.cursors.itemsView.end >=opts.cursors.items.end) || (scrollLoad && hasScrollbar)' class='ui-infinitescroll-more' ng-click='loadMoreDir({})'>Load More</div>"+"<div ng-show='noMoreLoadMoreItems.next && opts.cursors.items.end <= opts.cursors.itemsView.end' class='ui-infinitescroll-no-more'>"+attrs.noMoreResultsText+"</div>"+"</div>"+"</div>";element.replaceWith(html)},controller:function($scope,$element,$attrs){function init(){$scope.page=Math.floor($scope.opts.cursors.itemsView.current/$attrs.pageSize),setItemsViewCursor({}),setItems({}),$scope.items.length<2*$attrs.pageSize&&$scope.loadMoreDir({})}function setItems(params){var diff,height1,ppSend={};if($attrs.itemHeight&&(height1=$attrs.itemHeight,cursorsSave={start:$scope.opts.cursors.itemsView.start,end:$scope.opts.cursors.itemsView.end}),$scope.opts.cursors.itemsView.end=$scope.page*$attrs.pageSize+$attrs.pageSize,setItemsViewCursor({}),$scope.itemsView=$scope.items.slice($scope.opts.cursors.itemsView.start,$scope.opts.cursors.itemsView.end),$attrs.itemHeight){params.prev?(ppSend.prev=!0,diff=cursorsSave.start-$scope.opts.cursors.itemsView.start):(ppSend.prev=!1,diff=$scope.opts.cursors.itemsView.end-cursorsSave.end);var diffHeight=diff*height1;0>diffHeight&&(diffHeight=-1*diffHeight),ppSend.diffHeight=diffHeight}scrollToMiddle(ppSend),checkForScrollBar({})}function setItemsViewCursor(){var end=$scope.page*$attrs.pageSize+$attrs.pageSize;end>$scope.items.length&&(end=$scope.items.length),$scope.opts.cursors.itemsView.end=end;var start=$scope.page*$attrs.pageSize-$attrs.pageSize;0>start&&(start=0),$scope.opts.cursors.itemsView.start=start}function scrollToMiddle(params){var scrollPos,scrollHeight,viewportHeight,middle,newMiddle;if($attrs.pageScroll)scrollPos=$(window).scrollTop(),scrollHeight=$(document).height(),viewportHeight=$(window).height(),middle=Math.floor(scrollHeight/2-viewportHeight/2),params.diffHeight&&(middle=params.prev?params.diffHeight:scrollHeight-params.diffHeight-viewportHeight),void 0!==params.alreadyTimedOut&&params.alreadyTimedOut||!(middle>scrollHeight||2*$attrs.itemHeight*$attrs.pageSize>scrollHeight)?($attrs.animateScroll?$(window).animate({scrollTop:middle+"px"},$attrs.animateScrollDuration):window.scrollTo(0,middle),$attrs.animateAfterItems&&(newMiddle=params.prev?middle-$attrs.itemHeight*$attrs.animateAfterItems:middle+$attrs.itemHeight*$attrs.animateAfterItems,$(window).animate({scrollTop:newMiddle+"px"},$attrs.animateAfterDuration))):$timeout(function(){params.alreadyTimedOut=!0,scrollToMiddle(params)},100);else{var ele=document.getElementById(scrollId);scrollPos=ele.scrollTop,scrollHeight=ele.scrollHeight,viewportHeight=ele.clientHeight,middle=Math.floor(scrollHeight/2-viewportHeight/2),params.diffHeight&&(middle=params.prev?params.diffHeight:scrollHeight-params.diffHeight-viewportHeight),void 0!==params.alreadyTimedOut&&params.alreadyTimedOut||!(middle>scrollHeight||2*$attrs.itemHeight*$attrs.pageSize>scrollHeight)?($attrs.animateScroll?$("#"+scrollId).animate({scrollTop:middle+"px"},$attrs.animateScrollDuration):document.getElementById(scrollId).scrollTop=middle,$attrs.animateAfterItems&&(newMiddle=params.prev?middle-$attrs.itemHeight*$attrs.animateAfterItems:middle+$attrs.itemHeight*$attrs.animateAfterItems,$("#"+scrollId).animate({scrollTop:newMiddle+"px"},$attrs.animateAfterDuration))):$timeout(function(){params.alreadyTimedOut=!0,scrollToMiddle(params)},100)}}function changePage(params){params.prev?$scope.page--:$scope.page++,setItems(params)
}function getMoreItems(params){var loadPageSize,cursor;if(void 0!==$scope.loadMore&&void 0!==$scope.loadMore()&&"function"==typeof $scope.loadMore()){var ppTemp={};params.prev?(ppTemp.prev=!0,($scope.opts.cursors.items.start>0||$scope.negativeLoad)&&!$scope.noMoreLoadMoreItems.prev&&(loadPageSize=$attrs.loadMorePageSize,cursor=$scope.opts.cursors.items.start+$scope.opts.cursors.negative-loadPageSize,$scope.loadMore()({cursor:cursor,loadMorePageSize:loadPageSize,searchText:""},function(results,ppCustom){addLoadMoreItems(results,ppCustom,ppTemp)}))):(ppTemp.next=!0,$scope.noMoreLoadMoreItems.next||(loadPageSize=$attrs.loadMorePageSize,cursor=$scope.opts.cursors.items.end,$scope.loadMore()({cursor:cursor,loadMorePageSize:loadPageSize,searchText:""},function(results,ppCustom){addLoadMoreItems(results,ppCustom,ppTemp)})))}}function addLoadMoreItems(results,ppCustom,params){results.length>0?(params.prev?($scope.items=results.concat($scope.items),$scope.page+=Math.ceil(results.length/$attrs.pageSize),$scope.opts.cursors.items.start-=results.length,0>$scope.opts.cursors.items.start&&($scope.opts.cursors.negative-=-1*$scope.opts.cursors.items.start,$scope.opts.cursors.items.end+=-1*$scope.opts.cursors.items.start,$scope.opts.cursors.items.start=0)):($scope.items=$scope.items.concat(results),$scope.opts.cursors.items.end+=results.length),changePage(params)):(params.prev&&$scope.opts.cursors.items.start<$scope.opts.cursors.itemsView.start||params.next&&$scope.opts.cursors.items.end>$scope.opts.cursors.itemsView.end)&&changePage(params),$attrs.noStopLoadMore||(results.length<$attrs.loadMorePageSize||void 0!==params.loadPageSize&&results.length<params.loadPageSize)&&(params.prev?$scope.noMoreLoadMoreItems.prev=!0:$scope.noMoreLoadMoreItems.next=!0)}function checkForScrollBar(){var scrollHeight,viewportHeight;$scope.scrollLoad&&$timeout(function(){if($attrs.pageScroll)scrollHeight=$(document).height(),viewportHeight=$(window).height(),$scope.hasScrollbar=scrollHeight>viewportHeight?!0:!1;else{var ele=document.getElementById(scrollId);scrollHeight=ele.scrollHeight,viewportHeight=ele.clientHeight,$scope.hasScrollbar=scrollHeight>viewportHeight?!0:!1}},100)}var defaultsOpts={cursors:{items:{start:0,end:$scope.items.length},itemsView:{current:0}},scrollId:!1};void 0===$scope.opts&&($scope.opts={});for(var xx in defaultsOpts)void 0===$scope.opts[xx]&&($scope.opts[xx]=defaultsOpts[xx]);var scrollId=$attrs.ids.scrollContent;if($scope.opts.scrollId&&(scrollId=$scope.opts.scrollId),$scope.negativeLoad=$attrs.negativeLoad,$scope.opts.cursors.negative=0,$scope.trigs={loading:!1},$scope.noMoreLoadMoreItems={prev:!1,next:!1},$scope.scrollLoad=$attrs.scrollLoad,$scope.scrollLoad){if(!$attrs.pageScroll){var ele1=document.getElementById(scrollId);eleAng=angular.element(ele1);var height1=eleAng.css("height"),overflow1=eleAng.css("overflow");height1&&overflow1||eleAng.addClass("ui-lookup-content-scroll")}$scope.hasScrollbar=!1}var timeoutInfo={scrolling:{trig:!1,delay:750}};$attrs.scrollLoad&&$timeout(function(){$attrs.pageScroll?uiInfinitescrollData.addScrollEvt($attrs.id,{attrs:$attrs,timeoutInfo:timeoutInfo,callback:function(){$timeout.cancel(timeoutInfo.scrolling.trig),timeoutInfo.scrolling.trig=$timeout(function(){var buffer=$attrs.scrollBuffer,scrollPos=$(window).scrollTop(),scrollHeight=$(document).height(),viewportHeight=$(window).height(),percentTop=100*(scrollPos/scrollHeight),percentBottom=100*((scrollPos+viewportHeight)/scrollHeight);$scope.scrollInfo={scrollPos:scrollPos,scrollHeight:scrollHeight,viewportHeight:viewportHeight,diff:scrollHeight-viewportHeight-buffer,percentTop:percentTop,percentBottom:percentBottom},scrollPos>5&&scrollPos>=scrollHeight-viewportHeight-buffer&&$scope.loadMoreDir({noDelay:!0,next:!0}),buffer>=scrollPos&&$scope.loadMoreDir({noDelay:!0,prev:!0})},timeoutInfo.scrolling.delay)}}):document.getElementById(scrollId).onscroll=function(){$timeout.cancel(timeoutInfo.scrolling.trig),timeoutInfo.scrolling.trig=$timeout(function(){var buffer=$attrs.scrollBuffer,ele=document.getElementById(scrollId),scrollPos=ele.scrollTop,scrollHeight=ele.scrollHeight,viewportHeight=ele.clientHeight;scrollPos>=scrollHeight-viewportHeight-buffer&&$scope.loadMoreDir({noDelay:!0,next:!0}),buffer>=scrollPos&&$scope.loadMoreDir({noDelay:!0,prev:!0})},timeoutInfo.scrolling.delay)}},1e3);$scope.loadMoreDir=function(params){var getMoreItemsTrig=!1;params.prev?0===$scope.opts.cursors.items.start&&0!==$scope.opts.cursors.itemsView.start||$scope.opts.cursors.items.start<$scope.opts.cursors.itemsView.start-$attrs.pageSize?changePage({prev:!0}):(getMoreItemsTrig=!0,params.noDelay=!0,getMoreItems({prev:!0})):$scope.opts.cursors.items.end>$scope.opts.cursors.itemsView.end+$attrs.pageSize||$scope.noMoreLoadMoreItems.next&&$scope.opts.cursors.items.end>$scope.opts.cursors.itemsView.end?changePage({next:!0}):(getMoreItemsTrig=!0,params.noDelay=!0,getMoreItems({next:!0}))},init({})}}}]).factory("uiInfinitescrollData",["ui.config","$timeout",function(){var inst={data:{},inited:!1,windowScroll:function(instId,data){data.callback({})},removeScrollEvt:function(instId){void 0!==this.data[instId]&&delete this.data[instId]},addScrollEvt:function(instId,params){var thisObj=this;this.inited||(window.onscroll=function(){for(var xx in thisObj.data)document.getElementById(thisObj.data[xx].attrs.ids.scrollContent)?thisObj.windowScroll(xx,thisObj.data[xx],{}):thisObj.removeScrollEvt(xx,{})}),this.inited=!0,thisObj.data[params.attrs.id]=params}};return inst}]),angular.module("ui.directives").directive("uiJq",["ui.config","$timeout",function(uiConfig,$timeout){return{restrict:"A",compile:function(tElm,tAttrs){if(!angular.isFunction(tElm[tAttrs.uiJq]))throw Error('ui-jq: The "'+tAttrs.uiJq+'" function does not exist');var options=uiConfig.jq&&uiConfig.jq[tAttrs.uiJq];return function(scope,elm,attrs){function callPlugin(){$timeout(function(){elm[attrs.uiJq].apply(elm,linkOptions)},0,!1)}var linkOptions=[];attrs.uiOptions?(linkOptions=scope.$eval("["+attrs.uiOptions+"]"),angular.isObject(options)&&angular.isObject(linkOptions[0])&&(linkOptions[0]=angular.extend({},options,linkOptions[0]))):options&&(linkOptions=[options]),attrs.ngModel&&elm.is("select,input,textarea")&&elm.on("change",function(){elm.trigger("input")}),attrs.uiRefresh&&scope.$watch(attrs.uiRefresh,function(){callPlugin()}),callPlugin()}}}}]),angular.module("ui.directives").factory("keypressHelper",["$parse",function($parse){var keysByCode={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},capitaliseFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)};return function(mode,scope,elm,attrs){var params,combinations=[];params=scope.$eval(attrs["ui"+capitaliseFirstLetter(mode)]),angular.forEach(params,function(v,k){var combination,expression;expression=$parse(v),angular.forEach(k.split(" "),function(variation){combination={expression:expression,keys:{}},angular.forEach(variation.split("-"),function(value){combination.keys[value]=!0}),combinations.push(combination)})}),elm.bind(mode,function(event){var altPressed=event.metaKey||event.altKey,ctrlPressed=event.ctrlKey,shiftPressed=event.shiftKey,keyCode=event.keyCode;"keypress"===mode&&!shiftPressed&&keyCode>=97&&122>=keyCode&&(keyCode-=32),angular.forEach(combinations,function(combination){var mainKeyPressed=combination.keys[keysByCode[event.keyCode]]||combination.keys[""+event.keyCode]||!1,altRequired=combination.keys.alt||!1,ctrlRequired=combination.keys.ctrl||!1,shiftRequired=combination.keys.shift||!1;mainKeyPressed&&altRequired==altPressed&&ctrlRequired==ctrlPressed&&shiftRequired==shiftPressed&&scope.$apply(function(){combination.expression(scope,{$event:event})})})})}}]),angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keydown",scope,elm,attrs)}}}]),angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keypress",scope,elm,attrs)}}}]),angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keyup",scope,elm,attrs)}}}]),angular.module("ui.directives").directive("uiLookup",["ui.config","$filter","$timeout",function(uiConfig,$filter,$timeout){function evalArray(arrayBase,params){var retArray={val:"",valid:1,msg:""};return void 0!==params.noDotNotation&&params.noDotNotation||(params.keys=params.keys.split(".")),1==params.keys.length?void 0!==arrayBase[params.keys[0]]&&(retArray.val=arrayBase[params.keys[0]]):2==params.keys.length?void 0!==arrayBase[params.keys[0]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]]):3==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]):4==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]):5==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]]):6==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]][params.keys[5]]):(retArray.valid=0,retArray.msg="Too deep / too many keys; can only handle key length up to 6"),retArray}return{restrict:"A",transclude:!0,scope:{itemsRaw:"=",itemsFiltered:"=",filterFields:"=",loadMore:"&",opts:"="},compile:function(element,attrs){var defaults={pageSize:10,placeholder:"search",scrollLoad:"0",loadMorePageSize:20,loadMoreItemsKey:"extra",filterFieldsDotNotation:!0,pageScroll:0,minSearchLength:2,minSearchShowAll:1,classInput:"",classInputCont:""};for(var xx in defaults)void 0===attrs[xx]&&(attrs[xx]=defaults[xx]);for(var attrsToInt=["pageSize","loadMorePageSize","scrollLoad","minSearchLength","minSearchShowAll"],ii=0;attrsToInt.length>ii;ii++)attrs[attrsToInt[ii]]=parseInt(attrs[attrsToInt[ii]],10);attrs.loadMorePageSize<attrs.pageSize&&(attrs.loadMorePageSize=attrs.pageSize),void 0===attrs.id&&(attrs.id="uiLookup"+Math.random().toString(36).substring(7));var id1=attrs.id;attrs.ids={input:id1+"Input",contentBottom:id1+"ContentBottom",inputBelow:id1+"InputBelow",scrollContent:id1+"ScrollContent"};var html="<div class='ui-lookup'><div class='ui-lookup-top'><div class='ui-lookup-input-div "+attrs.classInputCont+"'>"+"<input type='text' ng-change='changeInput({})' placeholder='"+attrs.placeholder+"' class='ui-lookup-input "+attrs.classInput+"' ng-model='opts.searchText' ng-click='clickInput({})' />"+"</div>"+"<div class='text-warning' ng-show='!trigs.loading && itemsFiltered.length <1 && opts.searchText.length >=minSearchLength'>No matches</div>"+"</div>"+"<div id='"+attrs.ids.scrollContent+"' class='ui-lookup-content' ng-transclude></div>"+"<div id='"+attrs.ids.contentBottom+"'>"+"<div ng-hide='trigs.loading || (noMoreLoadMoreItems && queuedItems.length <1) || (scrollLoad && hasScrollbar)' class='ui-lookup-more btn-link' ng-click='loadMoreDir({})'>Load More</div>"+"<div class='text-warning' ng-show='trigs.loading && opts.searchText.length >=minSearchLength'>Loading..</div>"+"<div ng-show='!trigs.loading && noMoreLoadMoreItems && queuedItems.length <1 && opts.searchText.length >=minSearchLength' class='ui-lookup-no-more muted'>No More Results!</div>"+"</div>"+"</div>";element.replaceWith(html)},controller:function($scope,$element,$attrs){function init(){formItems({}),$scope.queuedItems.length<$attrs.pageSize&&$scope.totFilteredItems<$scope.page*$attrs.pageSize&&$scope.loadMoreDir({})}function resetItems(){$scope.page=1,checkForScrollBar({}),$scope.noMoreLoadMoreItems=!1,$scope.queuedItems=[],cursors={},cursors[$attrs.loadMoreItemsKey]=0,$scope.itemsRaw[$attrs.loadMoreItemsKey].items=[],document.getElementById($attrs.ids.scrollContent).scrollTop=0}function formItems(params){var keys;if(void 0!==params.keys)keys=params.keys;else{keys=[];var counter=0;for(var xx in $scope.itemsRaw)keys[counter]=xx,counter++}$scope.items=[];for(var ii=0;keys.length>ii;ii++)$scope.items=$scope.items.concat($scope.itemsRaw[keys[ii]].items);$scope.filterItems({})}function getMoreItems(){if(void 0!==$scope.loadMore&&void 0!==$scope.loadMore()&&"function"==typeof $scope.loadMore()){var retQueue=addItemsFromQueue({}),ppTemp={};if(retQueue.pageFilled||(ppTemp.partialLoad=!0,ppTemp.numToFillCurPage=$attrs.pageSize-retQueue.numItemsAdded,$scope.page*$attrs.pageSize>$scope.totFilteredItems&&$scope.totFilteredItems>($scope.page-1)*$attrs.pageSize&&(ppTemp.numToFillCurPage-=$scope.page*$attrs.pageSize-$scope.totFilteredItems)),$scope.queuedItems.length<$attrs.pageSize&&!$scope.noMoreLoadMoreItems){var loadPageSize=$attrs.loadMorePageSize;ppTemp.partialLoad&&$attrs.pageSize+ppTemp.numToFillCurPage>loadPageSize&&(loadPageSize=$attrs.pageSize+ppTemp.numToFillCurPage,ppTemp.loadPageSize=loadPageSize),$scope.loadMore()({cursor:cursors[$attrs.loadMoreItemsKey],loadMorePageSize:loadPageSize,searchText:$scope.opts.searchText},function(results,ppCustom){addLoadMoreItems(results,ppCustom,ppTemp)})}}}function addItemsFromQueue(params){var numFromQueue,retArray={pageFilled:!1,numItemsAdded:0};return $scope.queuedItems.length>0&&(params.numToAdd?(numFromQueue=params.numToAdd,numFromQueue>$scope.queuedItems.length&&(numFromQueue=$scope.queuedItems.length)):$scope.queuedItems.length>=$attrs.pageSize?(numFromQueue=$attrs.pageSize,retArray.pageFilled=!0):numFromQueue=$scope.queuedItems.length,retArray.numItemsAdded=numFromQueue,$scope.itemsRaw[$attrs.loadMoreItemsKey].items=$scope.itemsRaw[$attrs.loadMoreItemsKey].items.concat($scope.queuedItems.slice(0,numFromQueue)),void 0!==params.partialLoad&&params.partialLoad&&numFromQueue!=$attrs.pageSize||$scope.page++,formItems({}),$scope.queuedItems=$scope.queuedItems.slice(numFromQueue,$scope.queuedItems.length)),retArray}function addLoadMoreItems(results,ppCustom,params){$scope.queuedItems=$scope.queuedItems.concat(results),cursors[$attrs.loadMoreItemsKey]+=results.length,(results.length<$attrs.loadMorePageSize||void 0!==params.loadPageSize&&results.length<params.loadPageSize)&&($scope.noMoreLoadMoreItems=!0),params.partialLoad&&addItemsFromQueue({partialLoad:!0,numToAdd:params.numToFillCurPage}),$scope.trigs.loading=!1}function checkForScrollBar(){$scope.scrollLoad&&$timeout(function(){var scrollHeight;if($attrs.pageScroll){scrollHeight=$(document).height();var viewportHeight=$(window).height();$scope.hasScrollbar=scrollHeight>viewportHeight?!0:!1}else{var ele=document.getElementById($attrs.ids.scrollContent);scrollHeight=ele.scrollHeight;var height1=ele.clientHeight;$scope.hasScrollbar=scrollHeight>height1?!0:!1}},100)}var defaults={};for(var xx in defaults)void 0===$scope[xx]&&($scope[xx]=defaults[xx]);void 0===$scope.opts&&($scope.opts={});var defaultOpts={searchText:"",watchItemKeys:["main"]};$scope.opts=angular.extend(defaultOpts,$scope.opts),$scope.minSearchLength=$attrs.minSearchLength,$scope.trigs={loading:!1},$scope.items=[],$scope.page=1,$scope.totFilteredItems=0,$scope.queuedItems=[];var cursors={};if(cursors[$attrs.loadMoreItemsKey]=0,void 0===$scope.itemsRaw[$attrs.loadMoreItemsKey]&&($scope.itemsRaw[$attrs.loadMoreItemsKey]={items:[]}),$scope.itemsRaw[$attrs.loadMoreItemsKey].items=[],$scope.noMoreLoadMoreItems=!1,$scope.scrollLoad=$attrs.scrollLoad,$scope.scrollLoad){if(!$attrs.pageScroll){var ele1=document.getElementById($attrs.ids.scrollContent);eleAng=angular.element(ele1);var height1=eleAng.css("height"),overflow1=eleAng.css("overflow");height1&&overflow1||eleAng.addClass("ui-lookup-content-scroll")}$scope.hasScrollbar=!1}$scope.testFxn=function(){alert("test")};var timeoutInfo={search:{trig:!1,delay:750},scrolling:{trig:!1,delay:750}};$attrs.scrollLoad&&($attrs.pageScroll?window.onscroll=function(){$timeout.cancel(timeoutInfo.scrolling.trig),timeoutInfo.scrolling.trig=$timeout(function(){var buffer=25,scrollPos=$(window).scrollTop(),scrollHeight=$(document).height(),viewportHeight=$(window).height();scrollPos>=scrollHeight-viewportHeight-buffer&&$scope.loadMoreDir({noDelay:!0,next:!0}),buffer>=scrollPos&&$scope.loadMoreDir({noDelay:!0,prev:!0})},timeoutInfo.scrolling.delay)}:document.getElementById($attrs.ids.scrollContent).onscroll=function(){$timeout.cancel(timeoutInfo.scrolling.trig),$timeout.cancel(timeoutInfo.search.trig),timeoutInfo.scrolling.trig=$timeout(function(){var buffer=25,ele=document.getElementById($attrs.ids.scrollContent),scrollPos=ele.scrollTop,scrollHeight=ele.scrollHeight,height1=ele.clientHeight;scrollPos>=scrollHeight-height1-buffer&&$scope.loadMoreDir({noDelay:!0})},timeoutInfo.scrolling.delay)}),$scope.filterItems=function(){var searchText1=$scope.opts.searchText.toLowerCase();$scope.itemsFiltered=searchText1.length<$attrs.minSearchLength?$attrs.minSearchShowAll?$scope.items:[]:$filter("filter")($scope.items,function(item){for(var curItem,match=!1,ii=0;$scope.filterFields.length>ii;ii++){if($attrs.filterFieldsDotNotation&&$scope.filterFields[ii].indexOf(".")>-1){var retArray1=evalArray(item,{keys:$scope.filterFields[ii]});curItem=void 0!==retArray1.val?retArray1.val:!1}else curItem=void 0!==item[$scope.filterFields[ii]]?item[$scope.filterFields[ii]]:!1;if(curItem&&(curItem=curItem.toLowerCase(),curItem.indexOf(searchText1)>-1)){match=!0;break}}return match}),$scope.totFilteredItems=$scope.itemsFiltered.length,$scope.itemsFiltered=$scope.itemsFiltered.slice(0,$scope.page*$attrs.pageSize),checkForScrollBar({})},$scope.clickInput=function(){$scope.filterItems({})},$scope.changeInput=function(){resetItems({}),formItems({}),timeoutInfo.search.trig&&$timeout.cancel(timeoutInfo.search.trig),$scope.totFilteredItems<$scope.page*$attrs.pageSize&&($scope.trigs.loading=!0,timeoutInfo.search.trig=$timeout(function(){getMoreItems({})},timeoutInfo.search.delay))};for(var ii=0;$scope.opts.watchItemKeys.length>ii;ii++)xx=$scope.opts.watchItemKeys[ii],$scope.$watch("itemsRaw."+xx+".items",function(newVal,oldVal){angular.equals(oldVal,newVal)||($scope.totFilteredItems<$scope.page*$attrs.pageSize&&resetItems({}),formItems({}))});$scope.$on("uiLookupReformItems",function(){formItems({})}),$scope.loadMoreDir=function(params){var getMoreItemsTrig=!1;$scope.totFilteredItems>$scope.page*$attrs.pageSize?($scope.totFilteredItems<($scope.page+2)*$attrs.pageSize&&(getMoreItemsTrig=!0),$scope.page++,$scope.filterItems({})):getMoreItemsTrig=!0,params.noDelay=!0,getMoreItemsTrig&&(params.noDelay?getMoreItems({}):($scope.trigs.loading=!0,timeoutInfo.search.trig=$timeout(function(){getMoreItems({})},timeoutInfo.search.delay)))},init({})}}}]),function(){function bindMapEvents(scope,eventsStr,googleObject,element){angular.forEach(eventsStr.split(" "),function(eventName){var $event={type:"map-"+eventName};google.maps.event.addListener(googleObject,eventName,function(evt){element.triggerHandler(angular.extend({},$event,evt)),scope.$$phase||scope.$apply()})})}function mapOverlayDirective(directiveName,events){app.directive(directiveName,[function(){return{restrict:"A",link:function(scope,elm,attrs){scope.$watch(attrs[directiveName],function(newObject){bindMapEvents(scope,events,newObject,elm)})}}}])}var app=angular.module("ui.directives");app.directive("uiMap",["ui.config","$parse",function(uiConfig,$parse){var mapEvents="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",options=uiConfig.map||{};return{restrict:"A",link:function(scope,elm,attrs){var opts=angular.extend({},options,scope.$eval(attrs.uiOptions)),map=new google.maps.Map(elm[0],opts),model=$parse(attrs.uiMap);model.assign(scope,map),bindMapEvents(scope,mapEvents,map,elm)}}}]),app.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(uiConfig,$parse,$compile){var infoWindowEvents="closeclick content_change domready position_changed zindex_changed",options=uiConfig.mapInfoWindow||{};return{link:function(scope,elm,attrs){var opts=angular.extend({},options,scope.$eval(attrs.uiOptions));opts.content=elm[0];var model=$parse(attrs.uiMapInfoWindow),infoWindow=model(scope);infoWindow||(infoWindow=new google.maps.InfoWindow(opts),model.assign(scope,infoWindow)),bindMapEvents(scope,infoWindowEvents,infoWindow,elm),elm.replaceWith("<div></div>");var _open=infoWindow.open;infoWindow.open=function(a1,a2,a3,a4,a5,a6){$compile(elm.contents())(scope),_open.call(infoWindow,a1,a2,a3,a4,a5,a6)}}}}]),mapOverlayDirective("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),mapOverlayDirective("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),mapOverlayDirective("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),mapOverlayDirective("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),mapOverlayDirective("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),mapOverlayDirective("uiMapGroundOverlay","click dblclick")}(),angular.module("ui.directives").directive("uiMask",[function(){var maskDefinitions={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};return{priority:100,require:"ngModel",restrict:"A",link:function(scope,iElement,iAttrs,controller){function initialize(maskAttr){return angular.isDefined(maskAttr)?(processRawMask(maskAttr),maskProcessed?(initializeElement(),bindEventListeners(),void 0):uninitialize()):uninitialize()}function uninitialize(){return maskProcessed=!1,unbindEventListeners(),angular.isDefined(originalPlaceholder)?iElement.attr("placeholder",originalPlaceholder):iElement.removeAttr("placeholder"),angular.isDefined(originalMaxlength)?iElement.attr("maxlength",originalMaxlength):iElement.removeAttr("maxlength"),!1}function processRawMask(mask){var characterCount=0;maskCaretMap=[],maskPatterns=[],maskPlaceholder="",mask instanceof Array?angular.forEach(mask,function(item){item instanceof RegExp?(maskCaretMap.push(characterCount++),maskPlaceholder+="_",maskPatterns.push(item)):"string"==typeof item&&angular.forEach(item.split(""),function(chr){maskPlaceholder+=chr,characterCount++})}):"string"==typeof mask&&angular.forEach(mask.split(""),function(chr){maskDefinitions[chr]?(maskCaretMap.push(characterCount),maskPlaceholder+="_",maskPatterns.push(maskDefinitions[chr])):maskPlaceholder+=chr,characterCount++}),maskCaretMap.push(maskCaretMap.slice().pop()+1),maskProcessed=maskCaretMap.length>1?!0:!1}function initializeElement(){value=oldValueUnmasked=unmaskValue(controller.$viewValue||""),valueMasked=oldValue=maskValue(value),isValid=validateValue(value),iAttrs.maxlength&&iElement.attr("maxlength",2*maskCaretMap[maskCaretMap.length-1]),iElement.attr("placeholder",maskPlaceholder),iElement.val(isValid&&value.length?valueMasked:"")}function bindEventListeners(){return eventsBound?!0:(iElement.bind("blur",blurHandler),iElement.bind("input propertychange keyup click mouseout",eventHandler),eventsBound=!0,void 0)}function unbindEventListeners(){return eventsBound?(iElement.unbind("blur",blurHandler),iElement.unbind("input",eventHandler),iElement.unbind("propertychange",eventHandler),iElement.unbind("keyup",eventHandler),iElement.unbind("click",eventHandler),iElement.unbind("mouseout",eventHandler),eventsBound=!1,void 0):!0}function formatter(modelValue){return maskProcessed?(value=unmaskValue(modelValue||""),isValid=validateValue(value),controller.$setValidity("mask",isValid),isValid?maskValue(value):void 0):modelValue}function parser(viewValue){return maskProcessed?(value=unmaskValue(viewValue||""),isValid=validateValue(value),controller.$setValidity("mask",isValid),""===value&&void 0!==controller.$error.required&&controller.$setValidity("required",!1),isValid?value:void 0):viewValue}function validateValue(value){return value.length?value.length===maskCaretMap.length-1:!0}function unmaskValue(value){var valueUnmasked="",maskPatternCopys=maskPatterns.slice();return angular.forEach((""+value).split(""),function(chr){maskPatternCopys.length&&maskPatternCopys[0].test(chr)&&(valueUnmasked+=chr,maskPatternCopys.shift())}),valueUnmasked}function maskValue(unmaskedValue){var valueMasked="",maskCaretMapCopy=maskCaretMap.slice();return angular.forEach(maskPlaceholder.split(""),function(chr,i){unmaskedValue.length&&i===maskCaretMapCopy[0]?(valueMasked+=unmaskedValue.charAt(0)||"_",unmaskedValue=unmaskedValue.substr(1),maskCaretMapCopy.shift()):valueMasked+=chr}),valueMasked}function blurHandler(){oldCaretPosition=0,oldSelectionLength=0,isValid&&0!==value.length||(valueMasked="",iElement.val(""),scope.$apply(function(){controller.$setViewValue("")}))}function eventHandler(e){var eventWhich=e.which,eventType=e.type;if(16==eventWhich||91==eventWhich)return!0;var valMasked,elem=iElement,val=elem.val(),valOld=oldValue,valUnmasked=unmaskValue(val),valUnmaskedOld=oldValueUnmasked,caretPos=getCaretPosition(this)||0,caretPosOld=oldCaretPosition||0,caretPosDelta=caretPos-caretPosOld,caretPosMin=maskCaretMap[0],caretPosMax=maskCaretMap[valUnmasked.length]||maskCaretMap.slice().shift(),selectionLen=getSelectionLength(this),selectionLenOld=oldSelectionLength||0,isSelected=selectionLen>0,wasSelected=selectionLenOld>0,isAddition=val.length>valOld.length||selectionLenOld&&val.length>valOld.length-selectionLenOld,isDeletion=val.length<valOld.length||selectionLenOld&&val.length==valOld.length-selectionLenOld,isSelection=eventWhich>=37&&40>=eventWhich&&e.shiftKey,isKeyLeftArrow=37==eventWhich,isKeyBackspace=8==eventWhich||"keyup"!=eventType&&isDeletion&&-1===caretPosDelta,isKeyDelete=46==eventWhich||"keyup"!=eventType&&isDeletion&&0===caretPosDelta&&!wasSelected,caretBumpBack=(isKeyLeftArrow||isKeyBackspace||"click"==eventType)&&caretPos>caretPosMin;if(oldSelectionLength=selectionLen,"mouseout"==eventType||isSelection||isSelected&&("click"==eventType||"keyup"==eventType))return!0;if(("input"==eventType||"propertychange"==eventType)&&isDeletion&&!wasSelected&&valUnmasked===valUnmaskedOld){for(;isKeyBackspace&&caretPos>0&&!isValidCaretPosition(caretPos);)caretPos--;for(;isKeyDelete&&maskPlaceholder.length>caretPos&&-1==maskCaretMap.indexOf(caretPos);)caretPos++;var charIndex=maskCaretMap.indexOf(caretPos);valUnmasked=valUnmasked.substring(0,charIndex)+valUnmasked.substring(charIndex+1)}for(valMasked=maskValue(valUnmasked),oldValue=valMasked,oldValueUnmasked=valUnmasked,elem.val(valMasked),isAddition&&caretPosMin>=caretPos&&(caretPos=caretPosMin+1),caretBumpBack&&caretPos--,caretPos=caretPos>caretPosMax?caretPosMax:caretPosMin>caretPos?caretPosMin:caretPos;!isValidCaretPosition(caretPos)&&caretPos>caretPosMin&&caretPosMax>caretPos;)caretPos+=caretBumpBack?-1:1;(caretBumpBack&&caretPosMax>caretPos||isAddition&&!isValidCaretPosition(caretPosOld))&&caretPos++,oldCaretPosition=caretPos,setCaretPosition(this,caretPos)}function isValidCaretPosition(pos){return maskCaretMap.indexOf(pos)>-1}function getCaretPosition(input){if(void 0!==input.selectionStart)return input.selectionStart;if(document.selection){input.focus();var selection=document.selection.createRange();return selection.moveStart("character",-input.value.length),selection.text.length}}function setCaretPosition(input,pos){if(input.setSelectionRange)input.focus(),input.setSelectionRange(pos,pos);else if(input.createTextRange){var range=input.createTextRange();range.collapse(!0),range.moveEnd("character",pos),range.moveStart("character",pos),range.select()}}function getSelectionLength(input){return void 0!==input.selectionStart?input.selectionEnd-input.selectionStart:document.selection?document.selection.createRange().text.length:void 0}var maskCaretMap,maskPatterns,maskPlaceholder,value,valueMasked,isValid,oldValue,oldValueUnmasked,oldCaretPosition,oldSelectionLength,maskProcessed=!1,eventsBound=!1,originalPlaceholder=iAttrs.placeholder,originalMaxlength=iAttrs.maxlength;iAttrs.$observe("uiMask",initialize),controller.$formatters.push(formatter),controller.$parsers.push(parser),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return-1})}}}]),angular.module("ui.directives").directive("uiMultiselect",["ui.config","uiMultiselectData","uiLibArray","$timeout","$filter",function(uiConfig,uiMultiselectData,libArray,$timeout,$filter){return{priority:100,scope:{selectOpts:"=",ngModel:"=",config:"="},compile:function(element,attrs){var defaultsAttrs={placeholder:"Type to search",minLengthCreate:1,debug:!1};for(var xx in defaultsAttrs)void 0===attrs[xx]&&(attrs[xx]=defaultsAttrs[xx]);var html="<div>";return html+="<div id='{{id}}' class='ui-multiselect'>",html+="<div id='{{ids.displayBox}}' class='ui-multiselect-display-box' ng-click='focusInput({})'><div id='{{ids.selectedOpts}}' class='ui-multiselect-selected-opts'><div ng-repeat='opt in selectedOpts' class='ui-multiselect-selected-opt'><div class='ui-multiselect-selected-opt-remove' ng-click='removeOpt(opt, {})'>X</div> {{opt.name}}</div></div><div class='ui-multiselect-input-div'><input id='{{ids.input}}' type='text' ng-change='filterOpts({})' placeholder='"+attrs.placeholder+"' class='ui-multiselect-input' ng-model='modelInput' ng-click='clickInput({})' />"+"</div>"+"</div>"+"<div class='ui-multiselect-dropdown-cont'>"+"<div id='{{ids.dropdown}}' class='ui-multiselect-dropdown'>",html+="<div class='ui-multiselect-dropdown-opt' ng-repeat='opt in filteredOpts' ng-click='selectOpt(opt, {})'>{{opt.name}}</div>",html+="<div class='ui-multiselect-dropdown-opt' ng-show='config1.createNew && createNewAllowed && filteredOpts.length <1' ng-click='createNewOpt({})'>[Create New]</div><div class='ui-multiselect-dropdown-opt' ng-show='loadingOpt'>Loading..</div>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",element.replaceWith(html),function(scope,element,attrs){function selectOpts(optsArray){for(var ii=0;optsArray.length>ii;ii++)for(var xx in optsList){var index1=libArray.findArrayIndex(optsList[xx],"val",optsArray[ii],{});if(index1>-1){scope.selectOpt(optsList[xx][index1],{});break}}}function removeOpts(params){var xx,defaults={displayOnly:!1};for(xx in defaults)void 0===params[xx]&&(params[xx]=defaults[xx]);if(void 0!==params.valsToRemove&&params.valsToRemove.length>0){var ii;for(ii=0;params.valsToRemove.length>ii;ii++){var index1=libArray.findArrayIndex(scope.opts,"val",params.valsToRemove[ii],{});index1>-1&&(params.displayOnly?removeDisplayOpt(scope.opts[index1],{bulkRemove:!0}):scope.removeOpt(scope.opts[index1],{bulkRemove:!0}))
}scope.filterOpts({})}}function removeDisplayOpt(opt,params){opt.selected="0",index1=libArray.findArrayIndex(scope.selectedOpts,"val",opt.val,{}),index1>-1&&scope.selectedOpts.remove(index1),void 0!==params.bulkRemove&&params.bulkRemove||scope.filterOpts({})}function formOpts(params){var keys,ii;if(void 0!==params.keys)keys=params.keys;else{keys=[];var counter=0;for(var xx in optsList)keys[counter]=xx,counter++}for(scope.opts=[],ii=0;keys.length>ii;ii++)scope.opts=scope.opts.concat(optsList[keys[ii]]);for(ii=0;scope.opts.length>ii;ii++){var index1=libArray.findArrayIndex(scope.selectedOpts,"val",scope.opts[ii].val,{});0>index1&&(scope.opts[ii].selected="0")}}function createNewCheck(){var valid=!1,val=scope.modelInput;if(val.length>=attrs.minLengthCreate){var index1=libArray.findArrayIndex(scope.opts,"val",val,{});0>index1&&(valid=!0)}return valid}var xx,defaultsAttrs={placeholder:"Type to search",minLengthCreate:1,debug:!1};for(xx in defaultsAttrs)void 0===attrs[xx]&&(attrs[xx]=defaultsAttrs[xx]);attrs.id="uiMultiselect"+Math.random().toString(36).substring(7),attrs.ids={displayBox:attrs.id+"DisplayBox",input:attrs.id+"Input",dropdown:attrs.id+"Dropdown",selectedOpts:attrs.id+"SelectedOpts",selectedOpt:attrs.id+"SelectedOpt",remove:attrs.id+"Remove",opt:attrs.id+"Opt"},scope.id=attrs.id,scope.ids=attrs.ids,uiMultiselectData.data[attrs.id]={ids:attrs.ids,opts:{},blurCoords:{left:-1,right:-1,top:-1,bottom:-1},skipBlur:!1,lastSearchVal:"",attrs:attrs,maxWrite:25},uiMultiselectData.init({}),scope.config1={};var defaultConfig={createNew:0};if(scope.config&&void 0!==scope.config)for(xx in defaultConfig)scope.config1[xx]=void 0===scope.config[xx]?defaultConfig[xx]:scope.config[xx];else scope.config1=defaultConfig;void 0===scope.ngModel?scope.ngModel=[]:"string"==typeof scope.ngModel&&(scope.ngModel=[scope.ngModel]),void 0===scope.options&&(scope.options={}),scope.modelInput="",scope.loadingOpt=!1,scope.createNewAllowed=!0;var keycodes={enter:13,tab:9},evtTimings={selectOptBlurReset:225,clickInputBlurReset:225,onBlurDelay:125},optsList={"default":libArray.copyArray(scope.selectOpts,{})};scope.opts=[],scope.filteredOpts=[],scope.selectedOpts=[],$timeout(function(){uiMultiselectData.getFocusCoords(attrs.id,{}),uiMultiselectData.toggleDropdown(attrs.id,{hide:!0}),$("#"+uiMultiselectData.data[attrs.id].ids.input).blur(function(){$timeout(function(){uiMultiselectData.data[attrs.id].skipBlur||(attrs.debug&&console.log("skipBlur: "+uiMultiselectData.data[attrs.id].skipBlur),uiMultiselectData.blurInput(attrs.id,{}))},evtTimings.onBlurDelay)}),$("#"+uiMultiselectData.data[attrs.id].ids.input).keyup(function(evt){scope.keydownInput(evt,{})})},50),scope.focusInput=function(){$("#"+uiMultiselectData.data[attrs.id].ids.input).focus(),scope.clickInput({})},scope.keydownInput=function(evt){evt.keyCode==keycodes.enter&&(scope.filteredOpts.length>0?scope.selectOpt(scope.filteredOpts[0],{}):scope.config1.createNew&&scope.createNewOpt({}))},scope.filterOpts=function(){scope.filteredOpts=$filter("filter")(scope.opts,{name:scope.modelInput,selected:"0"}),1>scope.filteredOpts.length&&(scope.createNewAllowed=scope.config1.createNew&&createNewCheck({})?!0:!1)},scope.clickInput=function(){scope.filterOpts({}),uiMultiselectData.data[attrs.id].skipBlur=!0,uiMultiselectData.toggleDropdown(attrs.id,{show:!0}),$timeout(function(){uiMultiselectData.data[attrs.id].skipBlur=!1,attrs.debug&&console.log("clickInput skipBlur reset, skipBlur: "+uiMultiselectData.data[attrs.id].skipBlur)},evtTimings.clickInputBlurReset)},scope.selectOpt=function(opt){var valChanged=!1;uiMultiselectData.data[attrs.id].skipBlur=!0,attrs.debug&&console.log("selectOpt. skipBlur: "+uiMultiselectData.data[attrs.id].skipBlur),$timeout(function(){uiMultiselectData.data[attrs.id].skipBlur=!1,attrs.debug&&console.log("selectOpt skipBlur reset, skipBlur: "+uiMultiselectData.data[attrs.id].skipBlur)},evtTimings.selectOptBlurReset);var index1;index1=libArray.findArrayIndex(scope.ngModel,"",opt.val,{oneD:!0}),0>index1&&(scope.ngModel.push(opt.val),valChanged=!0),index1=libArray.findArrayIndex(scope.selectedOpts,"val",opt.val,{}),0>index1&&(opt.selected="1",scope.selectedOpts.push(opt)),scope.modelInput="",$("#"+uiMultiselectData.data[attrs.id].ids.input).focus(),scope.filterOpts({}),valChanged&&void 0!==attrs.onChangeEvt&&scope.$emit(attrs.onChangeEvt,{val:scope.ngModel})},scope.removeOpt=function(opt,params){var index1,valChanged=!1;index1=libArray.findArrayIndex(scope.ngModel,"",opt.val,{oneD:!0}),index1>-1&&(valChanged=!0,scope.ngModel.remove(index1),removeDisplayOpt(opt,params)),valChanged&&void 0!==attrs.onChangeEvt&&scope.$emit(attrs.onChangeEvt,{val:scope.ngModel})},scope.$on("uiMultiselectUpdateOpts",function(evt,params){if(params.id==attrs.id){var defaults={type:"default",replace:!0};params=angular.extend(defaults,params),optsList[params.type]=void 0===optsList[params.type]||params.replace===!0?params.opts:optsList[params.type].concat(params.opts),formOpts({}),selectOpts(scope.ngModel,{})}}),scope.createNewOpt=function(){if(createNewCheck({})){void 0===optsList.created&&(optsList.created=[]);var newOpt={val:scope.modelInput,name:scope.modelInput,selected:"0"};optsList.created[optsList.created.length]=newOpt,formOpts({}),scope.selectOpt(newOpt,{})}},formOpts({}),selectOpts(scope.ngModel,{}),scope.$watch("ngModel",function(newVal,oldVal){angular.equals(oldVal,newVal)||(removeOpts({valsToRemove:oldVal,displayOnly:!0}),selectOpts(scope.ngModel,{}))}),scope.$watch("selectOpts",function(newVal,oldVal){angular.equals(oldVal,newVal)||(optsList["default"]=newVal,formOpts({}),selectOpts(scope.ngModel,{}))})}}}}]).factory("uiMultiselectData",["uiLibArray","$rootScope",function(){var inst={data:{},timeout:{searchOpts:{trig:!1,delay:250}},inited:!1,init:function(){if(!this.inited){var thisObj=this;$(document).click(function(evt){for(var xx in thisObj.data){var instId=xx;thisObj.data[instId].blurCoords.top>-1&&(thisObj.mouseInDiv(evt,"",{coords:thisObj.data[instId].blurCoords})||thisObj.blurInput(instId,{}))}}),this.inited=!0}},toggleDropdown:function(instId,params){var id1=this.data[instId].ids.dropdown,ele=document.getElementById(id1);params.hide===!0?angular.element(ele).addClass("hidden"):angular.element(ele).removeClass("hidden")},getFocusCoords:function(instId){({displayBox:this.data[instId].ids.displayBox,dropdown:this.data[instId].ids.dropdown});var eles={};eles.displayBox=$("#"+this.data[instId].ids.displayBox),eles.dropdown=$("#"+this.data[instId].ids.dropdown),this.toggleDropdown(instId,{show:!0});var top1=0,left1=0,right1=0,bottom1=0;eles.displayBox.offset()&&eles.dropdown.offset()?(top1=eles.displayBox.offset().top,left1=eles.displayBox.offset().left,bottom1=eles.dropdown.offset().top+eles.dropdown.outerHeight(),right1=left1+eles.displayBox.outerWidth()):console.log("getFocusCoords offset() null.."),this.data[instId].blurCoords={left:left1,right:right1,top:top1,bottom:bottom1},this.toggleDropdown(instId,{hide:!0})},blurInput:function(instId){this.data[instId].skipBlur||(this.toggleDropdown(instId,{hide:!0}),this.data[instId].attrs.debug&&console.log("blurInput reset, skipBlur: "+this.data[instId].skipBlur))},mouseInDiv:function(ee,instId,params){var coords;if(params.coords)coords=params.coords;else{var left1=$("#"+instId).offset().left,top1=$("#"+instId).offset().top,bottom1=top1+$("#"+instId).height(),right1=left1+$("#"+instId).width();coords={left:left1,top:top1,bottom:bottom1,right:right1}}return ee.pageX>=coords.left&&ee.pageX<=coords.right&&ee.pageY>=coords.top&&ee.pageY<=coords.bottom?!0:!1}};return inst}]).factory("uiLibArray",[function(){var inst={isArray:function(array1){return"[object Array]"===Object.prototype.toString.apply(array1)?!0:!1},copyArray:function(array1,params){var newArray,aa;if(!array1)return array1;if(params||(params={}),params.skipKeys&&void 0!==params.skipKeys||(params.skipKeys=[]),"object"!=typeof array1)return array1;if(this.isArray(array1))for(newArray=[],aa=0;array1.length>aa;aa++)newArray[aa]=array1[aa]&&"object"==typeof array1[aa]?this.copyArray(array1[aa],params):array1[aa];else{newArray={};for(aa in array1){for(var goTrig=!0,ss=0;params.skipKeys.length>ss;ss++)if(params.skipKeys[ss]==aa){goTrig=!1;break}goTrig&&(newArray[aa]=array1[aa]&&"object"==typeof array1[aa]?this.copyArray(array1[aa],params):array1[aa])}}return newArray},findArrayIndex:function(array,key,val,params){var ii,index=-1;if(params.oneD){for(ii=0;array.length>ii;ii++)if(array[ii]==val){index=ii;break}}else for(ii=0;array.length>ii;ii++)if(array[ii][key]==val){index=ii;break}return index}};return inst}]),angular.module("ui.directives").directive("uiReset",["ui.config",function(uiConfig){var resetValue=null;return void 0!==uiConfig.reset&&(resetValue=uiConfig.reset),{require:"ngModel",link:function(scope,elm,attrs,ctrl){var aElement;aElement=angular.element('<a class="ui-reset" />'),elm.wrap('<span class="ui-resetwrap" />').after(aElement),aElement.bind("click",function(e){e.preventDefault(),scope.$apply(function(){attrs.uiReset?ctrl.$setViewValue(scope.$eval(attrs.uiReset)):ctrl.$setViewValue(resetValue),ctrl.$render()})})}}}]),angular.module("ui.directives").directive("uiRoute",["$location","$parse",function($location,$parse){return{restrict:"AC",compile:function(tElement,tAttrs){var useProperty;if(tAttrs.uiRoute)useProperty="uiRoute";else if(tAttrs.ngHref)useProperty="ngHref";else{if(!tAttrs.href)throw Error("uiRoute missing a route or href property on "+tElement[0]);useProperty="href"}return function($scope,elm,attrs){function staticWatcher(newVal){(hash=newVal.indexOf("#"))>-1&&(newVal=newVal.substr(hash+1)),watcher=function(){modelSetter($scope,$location.path().indexOf(newVal)>-1)},watcher()}function regexWatcher(newVal){(hash=newVal.indexOf("#"))>-1&&(newVal=newVal.substr(hash+1)),watcher=function(){var regexp=RegExp("^"+newVal+"$",["i"]);modelSetter($scope,regexp.test($location.path()))},watcher()}var modelSetter=$parse(attrs.ngModel||attrs.routeModel||"$uiRoute").assign,watcher=angular.noop;switch(useProperty){case"uiRoute":attrs.uiRoute?regexWatcher(attrs.uiRoute):attrs.$observe("uiRoute",regexWatcher);break;case"ngHref":attrs.ngHref?staticWatcher(attrs.ngHref):attrs.$observe("ngHref",staticWatcher);break;case"href":staticWatcher(attrs.href)}$scope.$on("$routeChangeSuccess",function(){watcher()})}}}}]),angular.module("ui.directives").directive("uiScrollfix",["$window",function($window){"use strict";return{link:function(scope,elm,attrs){var top=elm.offset().top;attrs.uiScrollfix?"-"===attrs.uiScrollfix.charAt(0)?attrs.uiScrollfix=top-attrs.uiScrollfix.substr(1):"+"===attrs.uiScrollfix.charAt(0)&&(attrs.uiScrollfix=top+parseFloat(attrs.uiScrollfix.substr(1))):attrs.uiScrollfix=top,angular.element($window).on("scroll.ui-scrollfix",function(){var offset;if(angular.isDefined($window.pageYOffset))offset=$window.pageYOffset;else{var iebody=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;offset=iebody.scrollTop}!elm.hasClass("ui-scrollfix")&&offset>attrs.uiScrollfix?elm.addClass("ui-scrollfix"):elm.hasClass("ui-scrollfix")&&attrs.uiScrollfix>offset&&elm.removeClass("ui-scrollfix")})}}}]),angular.module("ui.directives").directive("uiSelect2",["ui.config","$timeout",function(uiConfig,$timeout){var options={};return uiConfig.select2&&angular.extend(options,uiConfig.select2),{require:"?ngModel",compile:function(tElm,tAttrs){var watch,repeatOption,repeatAttr,isSelect=tElm.is("select"),isMultiple=void 0!==tAttrs.multiple;return tElm.is("select")&&(repeatOption=tElm.find("option[ng-repeat], option[data-ng-repeat]"),repeatOption.length&&(repeatAttr=repeatOption.attr("ng-repeat")||repeatOption.attr("data-ng-repeat"),watch=jQuery.trim(repeatAttr.split("|")[0]).split(" ").pop())),function(scope,elm,attrs,controller){var opts=angular.extend({},options,scope.$eval(attrs.uiSelect2));if(isSelect?(delete opts.multiple,delete opts.initSelection):isMultiple&&(opts.multiple=!0),controller&&(controller.$render=function(){isSelect?elm.select2("val",controller.$viewValue):isMultiple?controller.$viewValue?angular.isArray(controller.$viewValue)?elm.select2("data",controller.$viewValue):elm.select2("val",controller.$viewValue):elm.select2("data",[]):angular.isObject(controller.$viewValue)?elm.select2("data",controller.$viewValue):controller.$viewValue?elm.select2("val",controller.$viewValue):elm.select2("data",null)},watch&&scope.$watch(watch,function(newVal){newVal&&$timeout(function(){elm.select2("val",controller.$viewValue),elm.trigger("change")})}),!isSelect&&(elm.bind("change",function(){scope.$apply(function(){controller.$setViewValue(elm.select2("data"))})}),opts.initSelection))){var initSelection=opts.initSelection;opts.initSelection=function(element,callback){initSelection(element,function(value){controller.$setViewValue(value),callback(value)})}}attrs.$observe("disabled",function(value){elm.select2(value&&"disable"||"enable")}),attrs.ngMultiple&&scope.$watch(attrs.ngMultiple,function(){elm.select2(opts)}),$timeout(function(){elm.select2(opts),elm.val(controller.$viewValue),controller.$render(),opts.initSelection||isSelect||controller.$setViewValue(elm.select2("data"))})}}}}]),angular.module("ui.directives").directive("uiShow",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiShow,function(newVal){newVal?elm.addClass("ui-show"):elm.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiHide,function(newVal){newVal?elm.addClass("ui-hide"):elm.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiToggle,function(newVal){newVal?elm.removeClass("ui-hide").addClass("ui-show"):elm.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.directives").directive("uiSlider",["uiPolynomial","uiSliderService",function(uiPolynomial,uiSliderService){var template_html="";return template_html+="<div id = '{{slider_id}}' ng-mousemove = 'mousemoveHandler($event); $event.preventDefault()' class = '{{container_class}}'>",template_html+="<div ng-click = 'barClickHandler($event)' class = '{{bar_container_class}}' style = '{{bar_container_style}}'>",template_html+="<div id = '{{slider_id}}SliderBar' style = '{{slider_bar_style}}'>",template_html+="<div class = '{{left_bg_class}}' style = 'width:{{left_bg_width}}%; {{left_bg_style}}'> </div>",template_html+="<div ng-repeat = 'handle in handles' id = '{{slider_id}}Handle{{$index}}' ng-mousedown = 'startHandleDrag($index); $event.preventDefault()' class = '{{handle_class}}' style = 'z-index: {{handle.zindex}}; left: {{handle.left}}%; {{handle_style}}' ng-bind-html-unsafe = 'handle.innerhtml'></div>",template_html+="<div ng-repeat = 'interior in interiors' class = '{{interior_bg_class}}' style = 'left: {{interior.left}}%; width: {{interior.width}}%; {{interior_bg_style}}'> </div>",template_html+="<div class = '{{right_bg_class}}' style = 'width:{{right_bg_width}}%; {{right_bg_style}}'> </div>",template_html+="<div>",template_html+="<div ng-repeat = 'tick in ticks' class = '{{ticks_class}}' style = 'position: absolute; left:{{tick.left}}%;'> </div>",template_html+="</div>",template_html+="</div>",template_html+="<div class = '{{ticks_values_container_class}}' style = 'position: relative;' ng-show = 'use_ticks'>",template_html+="<div ng-repeat = 'tick in ticks' class = '{{ticks_value_class}}' style = 'position: absolute; left:{{tick.left}}%;'> {{tick.name}} </div>",template_html+="</div>",template_html+="</div>",template_html+="</div>",{restrict:"E",priority:0,scope:{handle_values:"=sliderHandleVariable",slider_id:"@sliderId",slider_opts:"=sliderOpts"},replace:!0,template:template_html,link:function(scope,element,attrs){var ii,defaults,building_slider,building_queued,scale_function_poly,cur_handle,dragging,slider_offset,slider_width,slider_init,increments,user_values_flag,rotate_radians;defaults={num_handles:1,slider_min:0,slider_max:100,precision:0,scale_string:"[1, 1]",zero_method:"newton",increment:0,user_values:"",evt_mouseup:"",slider_moveable:!0,use_array:!0,rotate:0,bar_container_class:"ui-slider-bar",left_bg_class:"ui-slider-bar-active",interior_bg_class:"ui-slider-bar-active",right_bg_class:"ui-slider-bar-inactive",handle_class:"ui-slider-bar-handle",handle_html:'<div class = "ui-slider-bar-handle-inner"></div>',units_pre:"",units_post:"",use_ticks:!1,ticks_values:"placeholder",ticks_class:"ui-slider-ticks",ticks_values_container_class:"ui-slider-ticks-values-container",ticks_value_class:"ui-slider-ticks-value"};var evt_get_value="",evt_return_value="",evt_get_all_values="",evt_return_all_values="",evt_set_value="",evt_init_slider="",evt_init_slider_finished="";scale_function_poly=uiPolynomial.stringToPoly("[1, 1]");var initSlider=function(){building_slider=!0,building_queued=!1;for(var xx in defaults)scope[xx]=void 0===scope.slider_opts[xx]?defaults[xx]:scope.slider_opts[xx];if("placeholder"==scope.ticks_values&&(scope.ticks_values=scope.user_values.length>0?[scope.user_values[0],scope.user_values[scope.user_values.length-1]]:[scope.slider_min,scope.slider_max]),nameInterfaceEvents(),uiSliderService.register(scope.slider_id,endHandleDrag),scope.initial_values=!1,void 0===scope.handle_values)scope.use_array=parseBoolean(scope.use_array,defaults.use_array),scope.handle_values=scope.use_array===!1?"":[];else if(isArray(scope.handle_values)===!1)scope.initial_values=scope.handle_values;else if(void 0!==scope.handle_values.length&&scope.handle_values.length>0){var array_copy=[];for(ii=0;scope.handle_values.length>ii;ii++)array_copy[ii]=scope.handle_values[ii];scope.initial_values=array_copy}parseData(),setStyles(),setHandles(),scope.use_ticks===!0&&setTicks(),setJqueryTouch(),building_slider=!1,building_queued===!0?initSlider():scope.$emit(evt_init_slider_finished,{id:scope.slider_id,values:scope.handle_values})},parseData=function(){if(scope.num_handles=parseInt(scope.num_handles,10),scope.slider_min=parseFloat(scope.slider_min),scope.slider_max=parseFloat(scope.slider_max),scope.increment=parseFloat(scope.increment),scope.precision=parseInt(scope.precision,10),scope.rotate=reRangeAngle(parseFloat(scope.rotate)),scope.slider_moveable=parseBoolean(scope.slider_moveable,defaults.slider_moveable),scope.use_array=parseBoolean(scope.use_array,defaults.use_array),user_values_flag=!1,""!==scope.user_values&&void 0!==scope.user_values){for(user_values_flag=!0,ii=0;scope.user_values.length>ii;ii++)if(void 0===scope.user_values[ii].val){var temp_val=scope.user_values[ii];scope.user_values[ii]={val:temp_val,name:temp_val}}else void 0===scope.user_values[ii].name&&(scope.user_values[ii].name=scope.user_values[ii].val);scope.slider_min=0,scope.slider_max=scope.user_values.length-1,scope.increment=1,scope.precision=0}scope.left_bg_width=0,scope.right_bg_width=0,cur_handle=0,dragging=!1,scope.recent_dragging=!1,scope.handles=[],scope.interiors=[],scope.ticks=[],increments=[],slider_offset={x:0,y:0},slider_width=100,slider_init=!1,rotate_radians=scope.rotate*(2*Math.PI/360),0!==scope.rotate&&90!==scope.rotate&&-90!==scope.rotate&&180!==scope.rotate&&(slider_offset.m1=Math.tan(rotate_radians),slider_offset.m2=-1/slider_offset.m1),0===scope.increment&&(scale_function_poly=uiPolynomial.stringToPoly(scope.scale_string))},parseBoolean=function(bool,default_val){return"false"==bool||bool===!1?!1:"true"==bool||bool===!0?!0:default_val},setStyles=function(){scope.slider_bar_style="position:relative; width:100%;",scope.left_bg_style="position:absolute; left:0%;",scope.interior_bg_style="position:absolute;",scope.right_bg_style="position:absolute; right:0%;",scope.handle_style="position:absolute;";var ro="rotate("+scope.rotate+"deg); ";scope.bar_container_style="-moz-transform:"+ro+"-webkit-transform:"+ro+"-o-transform:"+ro+"-ms-transform:"+ro+"transform:"+ro},setHandles=function(){var handle_htmls;if(-1!=scope.handle_html.indexOf("~"))for(handle_htmls=scope.handle_html.split("~"),ii=handle_htmls.length;scope.num_handles>ii;ii++)handle_htmls[ii]="";else for(handle_htmls=[],ii=0;scope.num_handles>ii;ii++)handle_htmls[ii]=scope.handle_html;for(ii=0;scope.num_handles>ii;ii++){var left_val;1==scope.num_handles?(left_val=0,scope.right_bg_width=100):left_val=100/(scope.num_handles-1)*ii;var value_in_handle=!1;-1!=handle_htmls[ii].indexOf("$$value")&&(value_in_handle=!0),scope.handles[ii]={zindex:10,left:left_val,value:calculate_value(left_val),html_string:handle_htmls[ii],value_in_handle:value_in_handle},user_values_flag===!1?(scope.handles[ii].display_value=scope.handles[ii].value,scope.handles[ii].return_value=scope.handles[ii].value):(scope.handles[ii].display_value=scope.user_values[scope.handles[ii].value].name,scope.handles[ii].return_value=scope.user_values[scope.handles[ii].value].val),scope.use_array===!1?scope.handle_values=scope.handles[ii].return_value:scope.handle_values[ii]=scope.handles[ii].return_value,update_zindex(ii),scope.handles[ii].value_in_handle===!0?parseHandleHtml(ii):scope.handles[ii].innerhtml=scope.handles[ii].html_string}for(ii=0;scope.num_handles-1>ii;ii++)scope.interiors[ii]={left:scope.handles[ii].left,width:scope.handles[ii+1].left-scope.handles[ii].left};if(0!==scope.increment&&void 0!==scope.increment){var cur_val=scope.slider_min;for(ii=0;scope.slider_max>cur_val;ii++)increments[ii]={},increments[ii].value=cur_val,increments[ii].left=calculate_left(cur_val),cur_val+=scope.increment;if(increments[ii]={},increments[ii].value=scope.slider_max,increments[ii].left=100,scope.initial_values===!1){var distances_to_increment=[];for(ii=0;scope.num_handles>ii;ii++){var new_left=findNearestIncrement(scope.handles[ii].left);distances_to_increment[ii]={handle:ii,distance:Math.abs(scope.handles[ii].left-new_left),new_left:new_left}}for(distances_to_increment.sort(function(a,b){return a.distance<b.distance?-1:b.distance<a.distance?1:0}),ii=0;scope.num_handles>ii;ii++)moveHandle(distances_to_increment[ii].handle,distances_to_increment[ii].new_left)}}if(scope.initial_values===!1);else for((""===evt_set_value||void 0===evt_set_value)&&nameInterfaceEvents(),ii=0;scope.num_handles>ii;ii++)scope.use_array===!1?setHandleValue(ii,scope.initial_values):setHandleValue(ii,scope.initial_values[ii])},setTicks=function(){for(var ii=0;scope.ticks_values.length>ii;ii++){scope.ticks[ii]=void 0===scope.ticks_values[ii].val?{val:scope.ticks_values[ii],name:scope.units_pre+scope.ticks_values[ii]+scope.units_post}:void 0===scope.ticks_values[ii].name?{val:scope.ticks_values[ii].val,name:scope.units_pre+scope.ticks_values[ii].val+scope.units_post}:{val:scope.ticks_values[ii].val,name:scope.ticks_values[ii].name};var new_left;if(user_values_flag===!0){var index,jj;for(jj=0;scope.user_values.length>jj;jj++)""+scope.user_values[jj].val==""+scope.ticks[ii].val&&(index=jj,jj=scope.user_values.length);new_left=increments[index].left}else new_left=calculate_left(scope.ticks[ii].val);scope.ticks[ii].left=new_left}},setJqueryTouch=function(){var initTouch=function(){if(0>=$("#"+scope.slider_id+"Handle"+0).length)setTimeout(function(){scope.$apply(function(){initTouch()})},500);else{for(ii=0;scope.num_handles>ii;ii++)(function(index){var handle_ele=$("#"+scope.slider_id+"Handle"+index);handle_ele.unbind("touchstart"),handle_ele.bind("touchstart",function(){scope.$apply(function(){scope.startHandleDrag(index)})})})(ii);var slider_ele=$("#"+scope.slider_id);slider_ele.unbind("touchmove"),slider_ele.bind("touchmove",function(event){event.preventDefault();var touch=event.originalEvent;scope.$apply(function(){scope.mousemoveHandler(touch)})})}};initTouch()},calculate_value=function(left){return fixPrecision(scope.slider_min+(scope.slider_max-scope.slider_min)*uiPolynomial.evalPoly(scale_function_poly,left/100),scope.precision)},invert_value=function(value){var ret2,zero_poly=uiPolynomial.subPoly(scale_function_poly,uiPolynomial.buildPoly([value],[0]));if("bisection"!=scope.zero_method){var ret1=uiPolynomial.findPolyZeroNewton({poly:zero_poly,guess:value});return ret1.err?(ret2=uiPolynomial.findPolyZeroBisection({poly:zero_poly,a:0,b:1}),ret2.val):ret1.val}return ret2=uiPolynomial.findPolyZeroBisection({poly:zero_poly,a:0,b:1}),ret2.val},calculate_left=function(value){return 100*invert_value((value-scope.slider_min)/(scope.slider_max-scope.slider_min))},update_backgrounds=function(index){0!==index?(scope.interiors[index-1].left=scope.handles[index-1].left,scope.interiors[index-1].width=scope.handles[index].left-scope.handles[index-1].left):scope.left_bg_width=scope.handles[index].left,scope.num_handles-1>index?(scope.interiors[index].left=scope.handles[index].left,scope.interiors[index].width=scope.handles[index+1].left-scope.handles[index].left):scope.right_bg_width=100-scope.handles[index].left},update_zindex=function(index){scope.handles[index].zindex=2>scope.handles[index].left?10+index+1:10+scope.num_handles-index},fixPrecision=function(number,digits){if(digits>=0)return parseFloat(number.toFixed(digits));var round_unit=Math.pow(10,-1*digits);return round_unit*Math.round(number/round_unit)},reRangeAngle=function(angle){for(;angle>180;)angle-=360;for(;-180>=angle;)angle+=360;return angle},initSliderOffsets=function(){if(scope.slider_moveable===!0||slider_init===!1){var bar=$("#"+scope.slider_id+"SliderBar");slider_width=bar.outerWidth(),slider_offset.x=bar.offset().left,slider_offset.y=bar.offset().top,0>scope.rotate&&(slider_offset.y+=slider_width*Math.abs(Math.sin(rotate_radians))),(scope.rotate>90||-90>scope.rotate)&&(slider_offset.x+=slider_width*Math.abs(Math.cos(rotate_radians))),void 0!==slider_offset.m1&&(slider_offset.b1=-1*slider_offset.m1*slider_offset.x+slider_offset.y),slider_init=!0}};scope.barClickHandler=function(event){if(scope.recent_dragging===!1){initSliderOffsets();var x_coord=event.pageX,y_coord=event.pageY,new_left=convertMouseToSliderPercent(x_coord,y_coord);0!==scope.increment&&void 0!==scope.increment&&(new_left=findNearestIncrement(new_left));var handle_index=0;if(new_left>=scope.handles[scope.num_handles-1].left)handle_index=scope.num_handles-1;else if(scope.handles[0].left>=new_left)handle_index=0;else{for(ii=0;new_left>scope.handles[ii].left;ii++);handle_index=scope.handles[ii].left-new_left>new_left-scope.handles[ii-1].left?ii-1:ii}moveHandle(handle_index,new_left),""!==scope.evt_mouseup&&void 0!==scope.evt_mouseup&&scope.$emit(scope.evt_mouseup,{num_handles:scope.num_handles,handle:handle_index,id:scope.slider_id,value:scope.handles[handle_index].return_value})}},scope.startHandleDrag=function(index){initSliderOffsets(),cur_handle=index,dragging=!0,scope.recent_dragging=!0,uiSliderService.activate(scope.slider_id)},scope.mousemoveHandler=function(event){dragging===!0&&continueHandleDrag(event)};var continueHandleDrag=function(event){var x_coord,y_coord;event.touches&&event.touches.length?(x_coord=event.touches[0].pageX,y_coord=event.touches[0].pageY):(x_coord=event.pageX,y_coord=event.pageY);var new_left=convertMouseToSliderPercent(x_coord,y_coord);0!==scope.increment&&void 0!==scope.increment&&(new_left=findNearestIncrement(new_left)),moveHandle(cur_handle,new_left)},convertMouseToSliderPercent=function(x_coord,y_coord){if(0===scope.rotate)return 100*((x_coord-slider_offset.x)/slider_width);if(180===scope.rotate)return 100*((slider_offset.x-x_coord)/slider_width);if(90===scope.rotate)return 100*((y_coord-slider_offset.y)/slider_width);if(-90===scope.rotate)return 100*((slider_offset.y-y_coord)/slider_width);var x_new=(y_coord-slider_offset.m2*x_coord-slider_offset.b1)/(slider_offset.m1-slider_offset.m2),y_new=slider_offset.m1*x_new+slider_offset.b1;if(90>scope.rotate&&scope.rotate>-90&&slider_offset.x>=x_new)return 0;if(x_new>=slider_offset.x)return 0;var dist=Math.sqrt(Math.pow(slider_offset.x-x_new,2)+Math.pow(slider_offset.y-y_new,2)),left=100*(dist/slider_width);return left},moveHandle=function(handle_index,new_left){scope.num_handles-1>handle_index&&new_left>scope.handles[handle_index+1].left?new_left=scope.handles[handle_index+1].left:handle_index>0&&scope.handles[handle_index-1].left>new_left?new_left=scope.handles[handle_index-1].left:0>new_left?new_left=0:new_left>100&&(new_left=100),scope.handles[handle_index].left=new_left,scope.handles[handle_index].value=calculate_value(new_left),user_values_flag===!1?(scope.handles[handle_index].display_value=scope.handles[handle_index].value,scope.handles[handle_index].return_value=scope.handles[handle_index].value):(scope.handles[handle_index].display_value=scope.user_values[scope.handles[handle_index].value].name,scope.handles[handle_index].return_value=scope.user_values[scope.handles[handle_index].value].val),scope.handles[handle_index].value_in_handle===!0&&parseHandleHtml(handle_index),scope.use_array===!1?scope.handle_values=scope.handles[handle_index].return_value:scope.handle_values[handle_index]=scope.handles[handle_index].return_value,update_backgrounds(handle_index),update_zindex(handle_index)},endHandleDrag=function(){var endHandleDragHelper=function(){dragging===!0&&(dragging=!1,uiSliderService.deactivate(),""!==scope.evt_mouseup&&void 0!==scope.evt_mouseup&&scope.$emit(scope.evt_mouseup,{num_handles:scope.num_handles,handle:cur_handle,id:scope.slider_id,value:scope.handles[cur_handle].return_value}),setTimeout(function(){scope.$apply(function(){scope.recent_dragging=!1})},300))};void 0===scope.$$phase?scope.$apply(function(){endHandleDragHelper()}):endHandleDragHelper()},findNearestIncrement=function(left){if(left>=100)return 100;if(0>=left)return 0;var increment_left=increments[1].left,low_index=Math.floor(left/increment_left);return left-increments[low_index].left<increments[low_index+1].left-left?increments[low_index].left:increments[low_index+1].left},parseHandleHtml=function(index){scope.handles[index].innerhtml=scope.handles[index].html_string.replace("$$value",scope.units_pre+scope.handles[index].display_value+scope.units_post)},setHandleValue=function(handle,value){var new_left;if(user_values_flag===!0){for(var index,ii=0;scope.user_values.length>ii;ii++)""+scope.user_values[ii].val==""+value&&(index=ii,ii=scope.user_values.length);new_left=increments[index].left}else new_left=calculate_left(value);moveHandle(handle,new_left)},nameInterfaceEvents=function(){evt_get_value="evtSliderGetValue"+scope.slider_id,evt_return_value="evtSliderReturnValue"+scope.slider_id,evt_get_all_values="evtSliderGetAllValues"+scope.slider_id,evt_return_all_values="evtSliderReturnAllValues"+scope.slider_id,evt_set_value="evtSliderSetValue"+scope.slider_id,evt_init_slider="evtInitSlider"+scope.slider_id,evt_init_slider_finished="evtSliderInitialized"+scope.slider_id};$(document).ready(function(){setJqueryTouch()}),scope.$on(evt_get_value,function(evt,params){var handle=0;void 0!==params&&void 0!==params.handle&&(handle=params.handle),scope.$emit(evt_return_value,{value:scope.handles[handle].return_value})}),scope.$on(evt_get_all_values,function(){var ret_array=[];for(ii=0;scope.handles.length>ii;ii++)ret_array[ii]=scope.handles[ii].return_value;scope.$emit(evt_return_all_values,{values:ret_array})}),scope.$on(evt_set_value,function(evt,params){var handle=0;void 0!==params&&void 0!==params.handle&&(handle=params.handle),setHandleValue(handle,params.value)}),scope.$on(evt_init_slider,function(){building_slider===!0?building_queued=!0:initSlider()});var isArray=function(array1){return"[object Array]"===Object.prototype.toString.apply(array1)?!0:!1};initSlider(),attrs.$observe("sliderId",function(){initSlider()})}}}]).factory("uiSliderService",[function(){var inst={sliders:{},active:!1,register:function(id,callback){this.sliders[id]=callback},remove:function(id){delete this.sliders[id]},activate:function(id){this.active=id},deactivate:function(){this.active=!1},clickHandler:function(thisObj){thisObj.active===!1||thisObj.sliders[thisObj.active]()},init:function(){var thisObj=this;$("body").bind("mouseup",function(event){thisObj.clickHandler(thisObj,event)}),$("body").bind("touchend",function(event){thisObj.clickHandler(thisObj,event)
})}};return inst.init(),inst}]).factory("uiPolynomial",[function(){var inst={buildPoly:function(coeffs,exps){var ii,poly=[];for(ii=0;coeffs.length>ii;ii++)poly[ii]={coeff:coeffs[ii],exp:exps[ii]};return poly},stringToPoly:function(poly_string){var ii,terms=poly_string.split("~"),poly=[];for(ii=0;terms.length>ii;ii++)poly[ii]={},poly[ii].coeff=parseFloat(terms[ii].slice(terms[ii].indexOf("[")+1),terms[ii].slice(terms[ii].indexOf(",")-1)),poly[ii].exp=parseFloat(terms[ii].slice(terms[ii].indexOf(",")+1),terms[ii].slice(terms[ii].indexOf("]")-1));return poly},evalPoly:function(poly,xx){var ii,val=0;for(ii=0;poly.length>ii;ii++)val+=poly[ii].coeff*Math.pow(xx,poly[ii].exp);return val},polyToFunction:function(poly){var thisObj=this;return function(xx){return thisObj.evalPoly(poly,xx)}},differentiatePoly:function(poly){var ii,thisObj=this,deriv=thisObj.copyPoly(poly);for(ii=0;deriv.length>ii;ii++)0===deriv[ii].exp?deriv[ii].coeff=0:(deriv[ii].coeff=deriv[ii].coeff*deriv[ii].exp,deriv[ii].exp=deriv[ii].exp-1);return deriv},integratePoly:function(poly){var ii,integral=thisObj.copyPoly(poly);for(ii=0;integral.length>ii;ii++){if(-1==integral[ii].exp)return console.log("ERROR: uiPolynomial.integratePoly can't handle polynomials with an exponent = -1 term!"),poly;integral[ii].exp=integral[ii].exp+1,integral[ii].coeff=integral[ii].coeff/integral[ii].exp}return integral},combinePolyTerms:function(poly){var ii,cur_exp,new_poly=[],term_counter=0;for(poly=poly.sort(function(a,b){return a.exp<b.exp?-1:a.exp>b.exp?1:0}),cur_exp=poly[0].exp,new_poly[term_counter]={coeff:0,exp:cur_exp},ii=0;poly.length>ii;ii++)cur_exp==poly[ii].exp?new_poly[term_counter].coeff=new_poly[term_counter].coeff+poly[ii].coeff:(term_counter++,cur_exp=poly[ii].exp,new_poly[term_counter]={coeff:poly[ii].coeff,exp:cur_exp});return new_poly},scalePoly:function(poly,scalar){var ii,thisObj=this,new_poly=thisObj.copyPoly(poly);for(ii=0;new_poly.length>ii;ii++)new_poly[ii].coeff=new_poly[ii].coeff*scalar;return new_poly},addPoly:function(poly1,poly2){return this.combinePolyTerms(poly1.concat(poly2))},subPoly:function(poly1,poly2){return this.addPoly(poly1,this.scalePoly(poly2,-1))},findPolyZeroNewton:function(params){var thisObj=this;if(void 0===params||void 0===params.poly||void 0===params.guess)return console.log("Error in uiPolynomial.findPolyZeroNewton: params.poly and params.guess must be defined"),{err:!0,val:0};var poly=params.poly,guess=params.guess,epsilon=1e-5;void 0!==params.epsilon&&(epsilon=params.epsilon);var max_iterations=50;if(void 0!==params.max_iterations&&(max_iterations=params.max_iterations),epsilon>Math.abs(thisObj.evalPoly(poly,guess)))return{err:!1,val:guess};var ff=thisObj.polyToFunction(poly),f_prime=thisObj.polyToFunction(thisObj.differentiatePoly(poly)),iterations=0,iterator=function(xx){return epsilon>Math.abs(ff(xx))?{err:!1,val:xx}:(iterations++,iterations>max_iterations?(console.log("Error in uiPolynomial.findPolyZeroNewton: Too many iterations without finding answer"),{err:!0,val:xx}):0===f_prime(xx)?iterator(xx+.1):iterator(xx-ff(xx)/f_prime(xx)))};return iterator(guess-ff(guess)/f_prime(guess))},findPolyZeroBisection:function(params){var thisObj=this;if(void 0===params||void 0===params.poly||void 0===params.a||void 0===params.b)return console.log("Error in uiPolynomial.findPolyZeroBisection: params.poly, params.a, and params.b must be defined"),{err:!0,val:0};var poly=params.poly,epsilon=1e-4;void 0!==params.epsilon&&(epsilon=params.epsilon);var ff=thisObj.polyToFunction(poly),iterator=function(a,b){var f_a=ff(a),f_b=ff(b);if(epsilon>Math.abs(f_a))return{err:!1,val:a};if(epsilon>Math.abs(f_b))return{err:!1,val:b};if(f_a>0&&f_b>0||0>f_a&&0>f_b)return console.log("Error in uiPolynomial.findPolyZeroBisection: Bad interval. The polynomial must be >= 0 at one endpoint and <= 0 at the other."),{err:!0,val:0};var c=(a+b)/2,f_c=ff(c);return epsilon>Math.abs(f_c)?{err:!1,val:c}:0>f_c?f_a>0?iterator(a,c):iterator(c,b):0>f_a?iterator(a,c):iterator(c,b)};return iterator(params.a,params.b)},copyPoly:function(poly){var ii,copy=[];for(ii=0;poly.length>ii;ii++)copy[ii]={coeff:poly[ii].coeff,exp:poly[ii].exp};return copy}};return inst}]),angular.module("ui.directives").directive("uiSortable",["ui.config",function(uiConfig){return{require:"?ngModel",link:function(scope,element,attrs,ngModel){var onReceive,onRemove,onStart,onUpdate,opts;opts=angular.extend({},uiConfig.sortable,scope.$eval(attrs.uiSortable)),ngModel&&(ngModel.$render=function(){element.sortable("refresh")},onStart=function(e,ui){ui.item.sortable={index:ui.item.index()}},onUpdate=function(e,ui){ui.item.sortable.resort=ngModel},onReceive=function(e,ui){ui.item.sortable.relocate=!0,ngModel.$modelValue.splice(ui.item.index(),0,ui.item.sortable.moved)},onRemove=function(e,ui){ui.item.sortable.moved=1===ngModel.$modelValue.length?ngModel.$modelValue.splice(0,1)[0]:ngModel.$modelValue.splice(ui.item.sortable.index,1)[0]},onStop=function(e,ui){if(ui.item.sortable.resort&&!ui.item.sortable.relocate){var end,start;start=ui.item.sortable.index,end=ui.item.index(),ui.item.sortable.resort.$modelValue.splice(end,0,ui.item.sortable.resort.$modelValue.splice(start,1)[0])}(ui.item.sortable.resort||ui.item.sortable.relocate)&&scope.$apply()},opts.start=function(_start){return function(e,ui){onStart(e,ui),"function"==typeof _start&&_start(e,ui)}}(opts.start),opts.stop=function(_stop){return function(e,ui){onStop(e,ui),"function"==typeof _stop&&_stop(e,ui)}}(opts.stop),opts.update=function(_update){return function(e,ui){onUpdate(e,ui),"function"==typeof _update&&_update(e,ui)}}(opts.update),opts.receive=function(_receive){return function(e,ui){onReceive(e,ui),"function"==typeof _receive&&_receive(e,ui)}}(opts.receive),opts.remove=function(_remove){return function(e,ui){onRemove(e,ui),"function"==typeof _remove&&_remove(e,ui)}}(opts.remove)),element.sortable(opts)}}}]),angular.module("ui.directives").directive("uiStyledselect",["ui.config","$compile","$timeout",function(){return{restrict:"A",scope:{opts:"=",ngModel:"="},compile:function(element,attrs){var defaults={placeholder:"Select"};for(var xx in defaults)void 0===attrs[xx]&&(attrs[xx]=defaults[xx]);var html="<div class='ui-styledselect-div'><select class='ui-styledselect' ng-change='updateVal({})' ng-options='opt.val as opt.name for opt in opts' ng-model='ngModel'><option value=''>"+attrs.placeholder+"</option>"+"</select>"+"<div class='ui-styledselect-display'>"+"{{displayVal}}"+"<div class='ui-styledselect-display-icon'></div>"+"</div>"+"</div>";return element.replaceWith(html),function(){}},controller:function($scope,$element,$attrs){$scope.displayVal=$scope.ngModel?$scope.ngModel:$attrs.placeholder,$scope.$watch("ngModel",function(newVal,oldVal){if(!angular.equals(oldVal,newVal))for(var ii=0;$scope.opts.length>ii;ii++)if($scope.opts[ii].val==newVal){$scope.displayVal=$scope.opts[ii].name;break}})}}}]),angular.module("ui.directives").directive("uiTinymce",["ui.config",function(uiConfig){return uiConfig.tinymce=uiConfig.tinymce||{},{require:"ngModel",link:function(scope,elm,attrs,ngModel){var expression,options={onchange_callback:function(inst){inst.isDirty()&&(inst.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply())},handle_event_callback:function(){return this.isDirty()&&(this.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply()),!0},setup:function(ed){ed.onSetContent.add(function(ed){ed.isDirty()&&(ed.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply())})}};expression=attrs.uiTinymce?scope.$eval(attrs.uiTinymce):{},angular.extend(options,uiConfig.tinymce,expression),setTimeout(function(){elm.tinymce(options)})}}}]),angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(scope,elm,attrs,ctrl){var validateFn,watch,validators={},validateExpr=scope.$eval(attrs.uiValidate);validateExpr&&(angular.isString(validateExpr)&&(validateExpr={validator:validateExpr}),angular.forEach(validateExpr,function(expression,key){validateFn=function(valueToValidate){return scope.$eval(expression,{$value:valueToValidate})?(ctrl.$setValidity(key,!0),valueToValidate):(ctrl.$setValidity(key,!1),void 0)},validators[key]=validateFn,ctrl.$formatters.push(validateFn),ctrl.$parsers.push(validateFn)}),attrs.uiValidateWatch&&(watch=scope.$eval(attrs.uiValidateWatch),angular.isString(watch)?scope.$watch(watch,function(){angular.forEach(validators,function(validatorFn){validatorFn(ctrl.$modelValue)})}):angular.forEach(watch,function(expression,key){scope.$watch(expression,function(){validators[key](ctrl.$modelValue)})})))}}}),angular.module("ui.filters").filter("format",function(){return function(value,replace){if(!value)return value;var token,target=""+value;return void 0===replace?target:angular.isArray(replace)||angular.isObject(replace)?(token=angular.isArray(replace)&&"$"||":",angular.forEach(replace,function(value,key){target=target.split(token+key).join(value)}),target):target.split("$0").join(replace)}}),angular.module("ui.filters").filter("highlight",function(){return function(text,search,caseSensitive){return search||angular.isNumber(search)?(text=""+text,search=""+search,caseSensitive?text.split(search).join('<span class="ui-match">'+search+"</span>"):text.replace(RegExp(search,"gi"),'<span class="ui-match">$&</span>')):text}}),angular.module("ui.filters").filter("inflector",function(){function ucwords(text){return text.replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase()})}function breakup(text,separator){return text.replace(/[A-Z]/g,function(match){return separator+match})}var inflectors={humanize:function(value){return ucwords(breakup(value," ").split("_").join(" "))},underscore:function(value){return value.substr(0,1).toLowerCase()+breakup(value.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(value){return value=value.substr(0,1).toLowerCase()+ucwords(value.split("_").join(" ")).substr(1).split(" ").join("")}};return function(text,inflector){return inflector!==!1&&angular.isString(text)?(inflector=inflector||"humanize",inflectors[inflector](text)):text}}),angular.module("ui.filters").filter("unique",function(){return function(items,filterOn){if(filterOn===!1)return items;if((filterOn||angular.isUndefined(filterOn))&&angular.isArray(items)){var newItems=[],extractValueToCompare=function(item){return angular.isObject(item)&&angular.isString(filterOn)?item[filterOn]:item};angular.forEach(items,function(item){for(var isDuplicate=!1,i=0;newItems.length>i;i++)if(angular.equals(extractValueToCompare(newItems[i]),extractValueToCompare(item))){isDuplicate=!0;break}isDuplicate||newItems.push(item)}),items=newItems}return items}});